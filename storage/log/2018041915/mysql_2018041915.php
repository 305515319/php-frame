[2018-04-19 15:24:49] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:24:49] ["DELETE FROM `frame_articles` WHERE `id` = 4"]
[2018-04-19 15:24:52] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:24:52] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 12 OFFSET 0"]
[2018-04-19 15:24:56] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:24:56] ["DELETE FROM `frame_articles` WHERE `id` = 5"]
[2018-04-19 15:24:59] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:24:59] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 12 OFFSET 0"]
[2018-04-19 15:25:02] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:25:02] ["DELETE FROM `frame_articles` WHERE `id` = 6"]
[2018-04-19 15:25:05] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:25:06] ["SELECT * FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC LIMIT 12 OFFSET 0"]
[2018-04-19 15:25:10] ["SELECT * FROM `frame_categorys` WHERE `id` = 9 LIMIT 1"]
[2018-04-19 15:25:17] ["UPDATE `frame_categorys` SET `name` = 'swoole', `sort` = 0, `update_time` = '2018-04-19 15:25:17' WHERE `id` = '9'"]
[2018-04-19 15:25:18] ["SELECT * FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC LIMIT 12 OFFSET 0"]
[2018-04-19 15:25:24] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:25:24] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:25:42] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:25:42] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:26:53] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:26:53] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:27:11] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:27:14] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:29:05] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:29:05] ["INSERT INTO `frame_articles` (`pid`, `title`, `content`, `create_time`) VALUES ('9', 'php+swoole+mysql \u4effwebqq\u53ca\u65f6\u804a\u5929', '&lt;p style=&quot;box-sizing: border-box;margin-top: 0px;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u4e00\u3001\u6548\u679c\u56fe&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62mW?w=682&amp;amp;h=653&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62mW?w=682&amp;h=653&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62m7?w=1226&amp;amp;h=1039&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62m7?w=1226&amp;h=1039&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u4e8c\u3001\u76ee\u5f55\u7ed3\u6784&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62n8?w=600&amp;amp;h=165&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62n8?w=600&amp;h=165&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;images : \u5b58\u653e\u56fe\u7247&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;js \uff1a js\u6587\u4ef6&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;swoole&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;inex.php : \u804a\u5929\u9996\u9875&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;login.html : \u767b\u5f55\u9875\u9762&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;webqq.sql : SQL\u6570\u636e\u5e93\u6587\u4ef6&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u4e09\u3001\u6570\u636e\u5e93\u7ed3\u6784&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62pe?w=738&amp;amp;h=690&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62pe?w=738&amp;h=690&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u56db\u3001\u4ee3\u7801\u90e8\u5206&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;4.1\u3001config.php \u6570\u636e\u5e93\u914d\u7f6e\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;?php&amp;nbsp;$database&amp;nbsp;=&amp;nbsp;array(&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;host&amp;#39;=&amp;gt;&amp;#39;127.0.0.1&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;user&amp;#39;=&amp;gt;&amp;#39;root&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;password&amp;#39;=&amp;gt;&amp;#39;4f54dd&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;port&amp;#39;=&amp;gt;3306,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;database&amp;#39;=&amp;gt;&amp;#39;webqq&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;charset&amp;#39;=&amp;gt;&amp;#39;utf8&amp;#39;&amp;nbsp;);&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.2\u3001action.php\u6570\u636e\u5e93\u64cd\u4f5c\u7c7b&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;?php&amp;nbsp;class&amp;nbsp;Action&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$conn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__construct()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;require_once&amp;nbsp;(__DIR__.&amp;#39;\/config.php&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn&amp;nbsp;=&amp;nbsp;mysqli_connect($database[&amp;#39;host&amp;#39;],$database[&amp;#39;user&amp;#39;],$database[&amp;#39;password&amp;#39;],$database[&amp;#39;database&amp;#39;])&amp;nbsp;or&amp;nbsp;die&amp;nbsp;(&amp;#39;Connect&amp;nbsp;mysql&amp;nbsp;failed&amp;nbsp;~~&amp;#39;.mysqli_connect_error());&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/login&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;login($nickname,$username,$password)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;session_start();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`id`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`username`&amp;nbsp;=&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$now&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($row[&amp;#39;id&amp;#39;])&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;update&amp;nbsp;`users`&amp;nbsp;set&amp;nbsp;`nickname`&amp;nbsp;=&amp;nbsp;&amp;#39;{$nickname}&amp;#39;&amp;nbsp;,&amp;nbsp;`username`&amp;nbsp;=&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;,`password`&amp;nbsp;=&amp;nbsp;md5(&amp;#39;{$password}&amp;#39;)&amp;nbsp;,&amp;nbsp;`login_time`&amp;nbsp;=&amp;nbsp;&amp;#39;{$now}&amp;#39;&amp;nbsp;,&amp;nbsp;`login_num`&amp;nbsp;=&amp;nbsp;(`login_num`&amp;nbsp;+&amp;nbsp;1)&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;=&amp;nbsp;{$row[&amp;#39;id&amp;#39;]}&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`users`&amp;nbsp;(`nickname`,`username`,`password`,`login_time`,`login_num`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$nickname}&amp;#39;&amp;nbsp;,&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;,&amp;nbsp;md5(&amp;#39;{$password}&amp;#39;)&amp;nbsp;,&amp;nbsp;&amp;#39;{$now}&amp;#39;&amp;nbsp;,&amp;#39;1&amp;#39;)&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$user_id&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;insert_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;]&amp;nbsp;=&amp;nbsp;$row[&amp;#39;id&amp;#39;]&amp;nbsp;?&amp;nbsp;$row[&amp;#39;id&amp;#39;]&amp;nbsp;:&amp;nbsp;&amp;nbsp;$user_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$_SESSION[&amp;#39;nickname&amp;#39;]&amp;nbsp;=&amp;nbsp;$nickname;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;1;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/add&amp;nbsp;friend&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;addFriend($from_uid,$to_uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;`friend`&amp;nbsp;where&amp;nbsp;`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$is_friend&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$is_friend[&amp;#39;to_uid&amp;#39;]){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($from_uid&amp;nbsp;==&amp;nbsp;$to_uid)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;2;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`nickname`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$nickname&amp;nbsp;=&amp;nbsp;$ret[&amp;#39;nickname&amp;#39;];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($nickname){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`friend`&amp;nbsp;(`from_uid`,`to_uid`,`nickname`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$from_uid}&amp;#39;,&amp;#39;{$to_uid}&amp;#39;,&amp;#39;{$nickname}&amp;#39;)&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;array(&amp;#39;to_uid&amp;#39;=&amp;gt;$to_uid,&amp;#39;nickname&amp;#39;=&amp;gt;$nickname);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;3;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;4;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/friend&amp;nbsp;lists&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;friendLists($from_uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`id`,`nickname`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;!=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$lists&amp;nbsp;=&amp;nbsp;[];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;($row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql_1&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`fd`&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$row[&amp;#39;id&amp;#39;]}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$query_1&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql_1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query_1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row[&amp;#39;status&amp;#39;]&amp;nbsp;=&amp;nbsp;$ret[&amp;#39;fd&amp;#39;]&amp;nbsp;?&amp;nbsp;&amp;#39;online&amp;#39;&amp;nbsp;:&amp;nbsp;&amp;#39;offline&amp;#39;&amp;nbsp;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$lists[]&amp;nbsp;=&amp;nbsp;$row;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$lists;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/load&amp;nbsp;history&amp;nbsp;message&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;loadHistory($from_uid,$to_uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`from_uid`,`to_uid`,`message`,`send_time`&amp;nbsp;from&amp;nbsp;`chat`&amp;nbsp;where&amp;nbsp;&amp;nbsp;(&amp;nbsp;(`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;)&amp;nbsp;or&amp;nbsp;(`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;)&amp;nbsp;)&amp;nbsp;order&amp;nbsp;by&amp;nbsp;`send_time`&amp;nbsp;desc&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message&amp;nbsp;=&amp;nbsp;[];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;($row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message[]&amp;nbsp;=&amp;nbsp;$row;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$message;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/send&amp;nbsp;message&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;sendMessage($from_uid,$to_uid,$message)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$time&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`chat`&amp;nbsp;(`from_uid`,`to_uid`,`message`,`send_time`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$from_uid}&amp;#39;,&amp;#39;{$to_uid}&amp;#39;,&amp;#39;{$message}&amp;#39;,&amp;#39;{$time}&amp;#39;)&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$last_id&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;insert_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$last_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/get&amp;nbsp;fd&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;getFd($uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`fd`&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$row[&amp;#39;fd&amp;#39;]&amp;nbsp;?&amp;nbsp;$row[&amp;#39;fd&amp;#39;]&amp;nbsp;:&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/bind&amp;nbsp;fd&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;bindFd($uid,$fd)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`fd_tmp`&amp;nbsp;(`fd`,`uid`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$fd}&amp;#39;,&amp;#39;{$uid}&amp;#39;)&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$fd;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/unbind&amp;nbsp;fd&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;unbindFd($fd)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;delete&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`fd`&amp;nbsp;=&amp;nbsp;&amp;#39;{$fd}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;1;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__destruct()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mysqli_close($this-&amp;gt;conn);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;}&amp;nbsp;\/\/process&amp;nbsp;ajax&amp;nbsp;request&amp;nbsp;if($_POST&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;isset($_POST[&amp;#39;typ&amp;#39;]))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$action&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Action();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;switch&amp;nbsp;($_POST[&amp;#39;typ&amp;#39;])&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;login&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;login($_POST[&amp;#39;nickname&amp;#39;],$_POST[&amp;#39;username&amp;#39;],$_POST[&amp;#39;password&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;addFriend&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;addFriend($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;friendLists&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;friendLists($_POST[&amp;#39;from_uid&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;loadHistory&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;loadHistory($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;sendMessage&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;sendMessage($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;],$_POST[&amp;#39;message&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;json_encode(array(&amp;#39;data&amp;#39;=&amp;gt;$ret));&amp;nbsp;}&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.3\u3001websocket.php\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;?php&amp;nbsp;require_once(__DIR__.&amp;#39;\/action.php&amp;#39;);&amp;nbsp;new&amp;nbsp;Websocket();&amp;nbsp;class&amp;nbsp;Websocket&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$serv;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$action;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__construct()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action&amp;nbsp;=&amp;nbsp;new&amp;nbsp;action();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv&amp;nbsp;=&amp;nbsp;new&amp;nbsp;swoole_websocket_server(&amp;#39;0.0.0.0&amp;#39;,9502);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;open&amp;#39;,array($this,&amp;#39;onOpen&amp;#39;));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;message&amp;#39;,array($this,&amp;#39;onMessage&amp;#39;));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;close&amp;#39;,array($this,&amp;#39;onClose&amp;#39;));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;start();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onOpen($server,$request)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;quot;Welcome&amp;nbsp;{$request-&amp;gt;fd}&amp;nbsp;\\\\\\\\n&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onMessage($server,$request)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data&amp;nbsp;=&amp;nbsp;json_decode($request-&amp;gt;data);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$from_uid&amp;nbsp;=&amp;nbsp;$data-&amp;gt;from_uid;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$to_uid&amp;nbsp;=&amp;nbsp;$data-&amp;gt;to_uid;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message&amp;nbsp;=&amp;nbsp;$data-&amp;gt;message;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action-&amp;gt;unbindFd($from_uid);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$from_fd&amp;nbsp;=&amp;nbsp;$this-&amp;gt;action-&amp;gt;bindFd($from_uid,$request-&amp;gt;fd);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($from_fd)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$to_fd&amp;nbsp;=&amp;nbsp;$this-&amp;gt;action-&amp;gt;getFd($to_uid);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($to_fd)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$server-&amp;gt;push($to_fd,$message);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$server-&amp;gt;push($request-&amp;gt;fd,&amp;#39;bind&amp;nbsp;from_fd&amp;nbsp;failed&amp;nbsp;~~&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onClose($server,$fd)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action-&amp;gt;unbindFd($fd);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;quot;Goodbye&amp;nbsp;{$fd}&amp;nbsp;\\\\\\\\n&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;}&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.4\u3001index.php\u9996\u9875\u804a\u5929\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;?php&amp;nbsp;session_start();&amp;nbsp;if(!$_SESSION[&amp;#39;nickname&amp;#39;]&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;!$_SESSION[&amp;#39;uid&amp;#39;]){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;#39;&amp;lt;script&amp;gt;window.location.href=&amp;quot;login.html&amp;quot;;&amp;lt;\/script&amp;gt;&amp;#39;;&amp;nbsp;}&amp;nbsp;?&amp;gt;&amp;nbsp;&amp;lt;!DOCTYPE&amp;nbsp;html&amp;gt;&amp;nbsp;&amp;lt;html&amp;nbsp;lang=&amp;quot;en&amp;quot;&amp;gt;&amp;nbsp;&amp;lt;head&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;charset=&amp;quot;UTF-8&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;http-equiv=&amp;quot;X-UA-Compatible&amp;quot;&amp;nbsp;content=&amp;quot;IE=edge&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-capable&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-touch-fullscreen&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-status-bar-style&amp;quot;&amp;nbsp;content=&amp;quot;black&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;pragma&amp;quot;&amp;nbsp;CONTENT=&amp;quot;no-cache&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;Cache-Control&amp;quot;&amp;nbsp;CONTENT=&amp;quot;no-cache,&amp;nbsp;must-revalidate&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;expires&amp;quot;&amp;nbsp;CONTENT=&amp;quot;0&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;msapplication-tap-highlight&amp;quot;&amp;nbsp;content=&amp;quot;no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;viewport&amp;quot;&amp;nbsp;content=&amp;quot;initial-scale=1,maximum-scale=1,minimum-scale=1&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;webqq----swoole&amp;lt;\/title&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;nbsp;src=&amp;quot;js\/jquery.js&amp;quot;&amp;gt;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;style&amp;nbsp;type=&amp;quot;text\/css&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;html,body{margin:0;padding:&amp;nbsp;0;background-color:&amp;nbsp;#eee;background-image:&amp;nbsp;url(&amp;quot;.\/images\/1.jpg&amp;quot;)&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.userlists{width:280px;height:&amp;nbsp;620px;border:1px&amp;nbsp;#222&amp;nbsp;solid;box-shadow:3px&amp;nbsp;3px&amp;nbsp;10px&amp;nbsp;#222;border-radius:5px;margin:100px&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;100px;background-color:&amp;nbsp;#fff}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.userlists-title{background-color:&amp;nbsp;#222;color:#fff;height:&amp;nbsp;50px;padding-top:10px;text-align:&amp;nbsp;center;border-radius:&amp;nbsp;5px&amp;nbsp;5px&amp;nbsp;0px&amp;nbsp;0px;position:&amp;nbsp;relative;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left{height:&amp;nbsp;500px;overflow-y:scroll;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left::-webkit-scrollbar&amp;nbsp;{display:none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;ul,li{margin:0px;padding:0px;list-style:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;li{border-bottom:&amp;nbsp;&amp;nbsp;1px&amp;nbsp;#666&amp;nbsp;solid;height:&amp;nbsp;35px;line-height:&amp;nbsp;35px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;li&amp;nbsp;a{text-decoration:&amp;nbsp;none;color:#000;height:&amp;nbsp;100%;display:&amp;nbsp;block;padding-left:&amp;nbsp;10px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.tools{border-radius:&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;5px&amp;nbsp;5px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.h10{height:&amp;nbsp;10px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.h30{height:&amp;nbsp;500px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.circular{height:&amp;nbsp;30px;width:&amp;nbsp;30px;border-radius:&amp;nbsp;30px;background-color:&amp;nbsp;#fff;margin:0&amp;nbsp;auto;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.find{height:&amp;nbsp;40px;line-height:40px;text-align:center;background-color:&amp;nbsp;#ccc}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.find&amp;nbsp;input{outline:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.dialogue{width:&amp;nbsp;600px;height:&amp;nbsp;600px;background-color:&amp;nbsp;#fff;position:&amp;nbsp;absolute;top:100px;left:&amp;nbsp;450px;border-radius:&amp;nbsp;5px\uff1bborder:1px&amp;nbsp;#222&amp;nbsp;solid;box-shadow:3px&amp;nbsp;5px&amp;nbsp;5px&amp;nbsp;#222;border-radius:5px;display:&amp;nbsp;none;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.close{border:1px&amp;nbsp;#fff&amp;nbsp;solid;border-radius:5px;display:&amp;nbsp;inline-block;width:&amp;nbsp;50px;height:&amp;nbsp;25px;line-height:&amp;nbsp;25px;position:&amp;nbsp;absolute;right:&amp;nbsp;15px;top:12px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send{height:&amp;nbsp;50px;line-height:&amp;nbsp;50px;background-color:&amp;nbsp;#222;border-radius:&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;5px&amp;nbsp;5px;text-align:&amp;nbsp;center;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send&amp;nbsp;input[name=&amp;#39;content&amp;#39;]{height:&amp;nbsp;30px;width:480px;padding:0px&amp;nbsp;5px;outline:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send&amp;nbsp;input[name=&amp;#39;sendBtn&amp;#39;]{height:&amp;nbsp;34px;width:80px;display:&amp;nbsp;inline-block;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.chat-line{width:360px;border-radius:&amp;nbsp;10px;margin:10px;padding:&amp;nbsp;10px;word-wrap:break-word}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.from{border:1px&amp;nbsp;red&amp;nbsp;solid;float:&amp;nbsp;right;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.to{border:1px&amp;nbsp;green&amp;nbsp;solid;float:&amp;nbsp;left;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.all{position:&amp;nbsp;absolute;top:0;right:&amp;nbsp;100px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.scroll_box{position:&amp;nbsp;relative;overflow-y:scroll;height:&amp;nbsp;500px};&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.scroll_box::-webkit-scrollbar&amp;nbsp;{display:none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists&amp;nbsp;&amp;nbsp;{position:&amp;nbsp;absolute;left:&amp;nbsp;0;top:&amp;nbsp;0;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/style&amp;gt;&amp;nbsp;&amp;lt;\/head&amp;gt;&amp;nbsp;&amp;lt;body&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists-title&amp;quot;&amp;gt;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;nickname&amp;#39;];?&amp;gt;&amp;lt;br&amp;gt;\u597d\u53cb\u5217\u8868&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;lists_left&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;ul&amp;nbsp;id=&amp;quot;friend_lists&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/ul&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists-title&amp;nbsp;tools&amp;quot;&amp;gt;&amp;lt;div&amp;nbsp;class=&amp;quot;h10&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;lt;div&amp;nbsp;class=&amp;quot;circular&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;dialogue&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists-title&amp;quot;&amp;gt;\u6b63\u5728\u4e0e&amp;nbsp;&amp;lt;t&amp;nbsp;id=&amp;quot;uname&amp;quot;&amp;gt;.....&amp;lt;\/t&amp;gt;&amp;nbsp;\u804a\u5929&amp;nbsp;&amp;lt;span&amp;nbsp;class=&amp;quot;close&amp;quot;&amp;gt;\u5173\u95ed&amp;lt;\/span&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;scroll_box&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;lists&amp;nbsp;&amp;quot;&amp;nbsp;id=&amp;quot;chat-box&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;send&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;hidden&amp;quot;&amp;nbsp;name=&amp;quot;to_uid&amp;quot;&amp;nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;content&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u53d1\u9001\u5185\u5bb9&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;button&amp;quot;&amp;nbsp;name=&amp;quot;sendBtn&amp;quot;&amp;nbsp;id=&amp;quot;sendMessage&amp;quot;&amp;nbsp;value=&amp;quot;\u53d1\u9001&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{from_uid:&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,typ:&amp;#39;friendLists&amp;#39;},function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(var&amp;nbsp;i&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;i&amp;lt;&amp;nbsp;r.data.length;&amp;nbsp;i++)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;status&amp;nbsp;=&amp;nbsp;r.data[i].status&amp;nbsp;==&amp;quot;offline&amp;quot;&amp;nbsp;?&amp;nbsp;&amp;quot;\u79bb\u7ebf&amp;quot;&amp;nbsp;:&amp;nbsp;&amp;quot;\u5728\u7ebf&amp;quot;&amp;nbsp;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;li&amp;gt;&amp;lt;a&amp;nbsp;data-id=&amp;quot;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].id&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;quot;&amp;nbsp;data-nickname=&amp;quot;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].nickname&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;quot;&amp;nbsp;href=&amp;quot;javascript:;&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;&amp;nbsp;r.data[i].nickname&amp;nbsp;+&amp;nbsp;&amp;quot;&amp;nbsp;&amp;amp;nbsp;(&amp;nbsp;&amp;quot;&amp;nbsp;+&amp;nbsp;status&amp;nbsp;+&amp;#39;&amp;nbsp;)&amp;nbsp;&amp;lt;\/a&amp;gt;&amp;lt;\/li&amp;gt;&amp;#39;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#friend_lists&amp;quot;).html(h);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#friend_lists&amp;quot;).on(&amp;quot;click&amp;quot;,&amp;quot;.friend&amp;quot;,function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;to_uid&amp;nbsp;=&amp;nbsp;$(this).attr(&amp;quot;data-id&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;nickname&amp;nbsp;=&amp;nbsp;$(this).attr(&amp;quot;data-nickname&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#uname&amp;quot;).html(nickname);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;to_uid&amp;#39;]&amp;quot;).val(to_uid);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{from_uid:&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,to_uid:to_uid,typ:&amp;quot;loadHistory&amp;quot;},function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for&amp;nbsp;(var&amp;nbsp;i&amp;nbsp;=&amp;nbsp;r.data.length&amp;nbsp;-&amp;nbsp;1;&amp;nbsp;i&amp;nbsp;&amp;gt;=&amp;nbsp;0;&amp;nbsp;i--)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data[i].from_uid&amp;nbsp;==&amp;nbsp;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;from&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].message&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;to&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].message&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).html(h);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.dialogue&amp;quot;).show();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#sendMessage&amp;quot;).on(&amp;quot;click&amp;quot;,function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val())&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sendMessage();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;please&amp;nbsp;input&amp;nbsp;your&amp;nbsp;message~&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(document).keyup(function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(evt.keyCode&amp;nbsp;==&amp;nbsp;13)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val())&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sendMessage();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;please&amp;nbsp;input&amp;nbsp;your&amp;nbsp;message~&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.close&amp;quot;).on(&amp;quot;click&amp;quot;,function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.dialogue&amp;quot;).hide();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;srcollBox(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;$(&amp;quot;.lists&amp;quot;).height();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.scroll_box&amp;quot;).scrollTop(h,4000)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(window.WebSocket){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;ws&amp;nbsp;=&amp;nbsp;new&amp;nbsp;WebSocket(&amp;quot;ws:\/\/192.168.0.140:9502&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onopen&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;Connect&amp;nbsp;WebSocket&amp;nbsp;succuess&amp;nbsp;~~&amp;nbsp;\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onmessage&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).append(&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;to&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;evt.data&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;message&amp;nbsp;on&amp;nbsp;server&amp;nbsp;:&amp;nbsp;&amp;quot;&amp;nbsp;+&amp;nbsp;evt.data&amp;nbsp;+&amp;nbsp;&amp;quot;\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onclose&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;WebSocket&amp;nbsp;closed&amp;nbsp;~~\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onerror&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;Connect&amp;nbsp;WebSocket&amp;nbsp;failed&amp;nbsp;~~\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;sendMessage(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;params&amp;nbsp;=&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;from_uid&amp;nbsp;:&amp;nbsp;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;to_uid&amp;nbsp;:&amp;nbsp;$(&amp;quot;input[name=&amp;#39;to_uid&amp;#39;]&amp;quot;).val(),&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;message&amp;nbsp;:&amp;nbsp;$(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val(),&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;typ&amp;nbsp;:&amp;nbsp;&amp;quot;sendMessage&amp;quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;};&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;msg&amp;nbsp;=&amp;nbsp;JSON.stringify(params);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).append(&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;from&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;$(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val()&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,params,function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.send(msg);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;send&amp;nbsp;message&amp;nbsp;failed&amp;nbsp;,&amp;nbsp;insert&amp;nbsp;mysql&amp;nbsp;failed~~\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;Your&amp;nbsp;browser&amp;nbsp;does&amp;nbsp;not&amp;nbsp;support&amp;nbsp;WebSocket&amp;nbsp;!&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;lt;\/body&amp;gt;&amp;nbsp;&amp;lt;\/html&amp;gt;&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.5\u3001login.html \u767b\u5f55\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;!DOCTYPE&amp;nbsp;html&amp;gt;&amp;nbsp;&amp;lt;html&amp;nbsp;lang=&amp;quot;en&amp;quot;&amp;gt;&amp;nbsp;&amp;lt;head&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;charset=&amp;quot;UTF-8&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;http-equiv=&amp;quot;X-UA-Compatible&amp;quot;&amp;nbsp;content=&amp;quot;IE=edge&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-capable&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-touch-fullscreen&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-status-bar-style&amp;quot;&amp;nbsp;content=&amp;quot;black&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;msapplication-tap-highlight&amp;quot;&amp;nbsp;content=&amp;quot;no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;viewport&amp;quot;&amp;nbsp;content=&amp;quot;initial-scale=1,maximum-scale=1,minimum-scale=1&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;webqq----swoole&amp;lt;\/title&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;nbsp;src=&amp;quot;.\/js\/jquery.js&amp;quot;&amp;gt;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;style&amp;nbsp;type=&amp;quot;text\/css&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;html,body{margin:0;padding:&amp;nbsp;0;background-color:&amp;nbsp;#eee}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.login-form{background-color:&amp;nbsp;#fff;width:&amp;nbsp;500px;height:&amp;nbsp;500px;margin:100px&amp;nbsp;auto;border:1px&amp;nbsp;#ccc&amp;nbsp;solid;border-radius:&amp;nbsp;5px;box-shadow:&amp;nbsp;3px&amp;nbsp;3px&amp;nbsp;3px&amp;nbsp;#666}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h3{text-align:&amp;nbsp;center;margin-top:&amp;nbsp;100px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container{text-align:&amp;nbsp;center;margin-top:&amp;nbsp;30px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container&amp;nbsp;label{display:&amp;nbsp;inline-block;width:&amp;nbsp;50px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container&amp;nbsp;input{display:&amp;nbsp;inline-block;height:&amp;nbsp;25px;line-height:&amp;nbsp;25px;padding:&amp;nbsp;0px&amp;nbsp;5px;width:&amp;nbsp;300px;outline:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;input[name=&amp;#39;login&amp;#39;]{background-color:&amp;nbsp;#5aba1f;color:#fff;border:none;width:&amp;nbsp;150px;height:&amp;nbsp;30px;line-height:&amp;nbsp;30px;border-radius:&amp;nbsp;5px;margin-top:&amp;nbsp;30px;cursor:&amp;nbsp;pointer;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.warning{border:2px&amp;nbsp;#f00&amp;nbsp;solid;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/style&amp;gt;&amp;nbsp;&amp;lt;\/head&amp;gt;&amp;nbsp;&amp;lt;body&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;form&amp;nbsp;method=&amp;quot;post&amp;quot;&amp;nbsp;action=&amp;quot;&amp;quot;&amp;nbsp;class=&amp;quot;login-form&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;h3&amp;gt;WebQQ&amp;lt;\/h3&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;label&amp;gt;\u6635\u79f0:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;nickname&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u6635\u79f0&amp;quot;&amp;nbsp;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;label&amp;gt;\u5e10\u53f7:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;username&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u7528\u6237&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;label&amp;gt;\u5bc6\u7801:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;password&amp;quot;&amp;nbsp;name=&amp;quot;password&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u5bc6\u7801&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;button&amp;quot;&amp;nbsp;name=&amp;quot;login&amp;quot;&amp;nbsp;value=&amp;quot;\u767b\u5f55&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/form&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;login&amp;#39;]&amp;quot;).click(function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;nickname&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).val();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;username&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).val();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;password&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).val();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(nickname&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8bbe\u7f6e\u6635\u79f0&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).focus();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(username&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8f93\u5165\u5e10\u53f7&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).focus();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(password&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8f93\u5165\u5bc6\u7801&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).focus();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{nickname:nickname,username:username,password:password,typ:&amp;#39;login&amp;#39;},function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data&amp;nbsp;==&amp;nbsp;&amp;quot;1&amp;quot;){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;window.location.href=&amp;quot;index.php&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;failed~~&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;lt;\/body&amp;gt;&amp;nbsp;&amp;lt;\/html&amp;gt;&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.6\u3001webqq.sql \u6570\u636e\u7ed3\u6784\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;--&amp;nbsp;Adminer&amp;nbsp;4.1.0&amp;nbsp;MySQL&amp;nbsp;dump&amp;nbsp;SET&amp;nbsp;NAMES&amp;nbsp;utf8;&amp;nbsp;SET&amp;nbsp;time_zone&amp;nbsp;=&amp;nbsp;&amp;#39;+00:00&amp;#39;;&amp;nbsp;SET&amp;nbsp;foreign_key_checks&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;SET&amp;nbsp;sql_mode&amp;nbsp;=&amp;nbsp;&amp;#39;NO_AUTO_VALUE_ON_ZERO&amp;#39;;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`chat`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`chat`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;ID&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`from_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`to_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`message`&amp;nbsp;varchar(255)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`send_time`&amp;nbsp;timestamp&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;DEFAULT&amp;nbsp;&amp;#39;0000-00-00&amp;nbsp;00:00:00&amp;#39;&amp;nbsp;ON&amp;nbsp;UPDATE&amp;nbsp;CURRENT_TIMESTAMP,&amp;nbsp;&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`fd_tmp`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`fd_tmp`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`fd`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;FD\u503c\u4e0e\u7528\u6237ID\u7ed1\u5b9a&amp;#39;;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`friend`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`friend`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`from_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;DEFAULT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`to_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`nickname`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;\u597d\u53cb\u5217\u8868&amp;#39;;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`users`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`users`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;ID&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`nickname`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u6635\u79f0&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`username`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u540d\u79f0&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`password`&amp;nbsp;char(32)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u5bc6\u7801&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`login_time`&amp;nbsp;datetime&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u6700\u540e\u767b\u9646\u65f6\u95f4&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`login_num`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;DEFAULT&amp;nbsp;&amp;#39;0&amp;#39;&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u6b21\u6570&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;\u7528\u6237\u5217\u8868&amp;#39;;&amp;nbsp;--&amp;nbsp;2018-03-27&amp;nbsp;10:05:35&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.7\u3001\u670d\u52a1\u5668\u73af\u5883centos7 + mariadb + swoole + apache + php7&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;\u6ce8\u610f\u4e8b\u9879\uff1a\u987b\u5b89\u88c5swoole\u6269\u5c55\uff0cLinux\u670d\u52a1\u5668\uff0cPHP7+\u7248\u672c\u4ee5\u4e0a&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;\u8fdb\u884c\u9879\u76ee\u6839\u76ee\u5f55\u4f7f\u7528: php websocket.php \u6267\u884c\u8be5\u6587\u4ef6&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 0px;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u6e90\u7801\u4e0b\u8f7d\u5730\u5740\uff1a&lt;a href=&quot;https:\/\/pan.baidu.com\/s\/1sWY-2zTj8slm9O7HCR-49w&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot; style=&quot;box-sizing: border-box;background: transparent;color: rgb(0, 154, 97);outline: 0px;border-bottom: 1px solid rgba(0, 154, 97, 0.25);padding-bottom: 1px&quot;&gt;https:\/\/pan.baidu.com\/s\/1sWY-...&lt;\/a&gt;&lt;\/p&gt;&lt;p&gt;&lt;br\/&gt;&lt;\/p&gt;', '2018-04-19 15:29:05')"]
[2018-04-19 15:29:08] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:29:08] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 12 OFFSET 0"]
[2018-04-19 15:29:10] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:29:10] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:29:10] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 2 OFFSET 0"]
[2018-04-19 15:29:26] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:29:26] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:29:26] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 2 OFFSET 0"]
[2018-04-19 15:29:53] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:29:53] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:29:53] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 2 OFFSET 0"]
[2018-04-19 15:30:21] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:30:21] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:30:21] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 2 OFFSET 0"]
[2018-04-19 15:30:48] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:30:48] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:30:48] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 1 OFFSET 0"]
[2018-04-19 15:39:50] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:39:50] ["SELECT `id`,`pid`,`title`,`content` FROM `frame_articles` WHERE `id` = 7 LIMIT 1"]
[2018-04-19 15:40:52] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:40:52] ["UPDATE `frame_articles` SET `pid` = '9', `id` = '7', `title` = 'php+swoole+mysql \u4effwebqq\u53ca\u65f6\u804a\u5929', `content` = '&lt;p style=&quot;box-sizing: border-box;margin-top: 0px;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u4e00\u3001\u6548\u679c\u56fe&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62mW?w=682&amp;amp;h=653&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62mW?w=682&amp;h=653&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62m7?w=1226&amp;amp;h=1039&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62m7?w=1226&amp;h=1039&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u4e8c\u3001\u76ee\u5f55\u7ed3\u6784&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62n8?w=600&amp;amp;h=165&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62n8?w=600&amp;h=165&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;images : \u5b58\u653e\u56fe\u7247&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;js \uff1a js\u6587\u4ef6&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;swoole&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;inex.php : \u804a\u5929\u9996\u9875&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;login.html : \u767b\u5f55\u9875\u9762&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;webqq.sql : SQL\u6570\u636e\u5e93\u6587\u4ef6&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u4e09\u3001\u6570\u636e\u5e93\u7ed3\u6784&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;&lt;span style=&quot;box-sizing: border-box&quot;&gt;&lt;img data-src=&quot;\/img\/bV62pe?w=738&amp;amp;h=690&quot; src=&quot;https:\/\/segmentfault.com\/img\/bV62pe?w=738&amp;h=690&quot; style=&quot;box-sizing: border-box;border: 1px solid rgb(221, 221, 221);vertical-align: middle;max-width: 100%;position: static !important;padding: 3px;cursor: pointer;display: inline&quot;\/&gt;&lt;\/span&gt;&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u56db\u3001\u4ee3\u7801\u90e8\u5206&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;4.1\u3001config.php \u6570\u636e\u5e93\u914d\u7f6e\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;?php&amp;nbsp;$database&amp;nbsp;=&amp;nbsp;array(&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;host&amp;#39;=&amp;gt;&amp;#39;127.0.0.1&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;user&amp;#39;=&amp;gt;&amp;#39;root&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;password&amp;#39;=&amp;gt;&amp;#39;4f54dd&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;port&amp;#39;=&amp;gt;3306,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;database&amp;#39;=&amp;gt;&amp;#39;webqq&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;charset&amp;#39;=&amp;gt;&amp;#39;utf8&amp;#39;&amp;nbsp;);&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.2\u3001action.php\u6570\u636e\u5e93\u64cd\u4f5c\u7c7b&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;?php&amp;nbsp;class&amp;nbsp;Action&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$conn;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__construct()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;require_once&amp;nbsp;(__DIR__.&amp;#39;\/config.php&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn&amp;nbsp;=&amp;nbsp;mysqli_connect($database[&amp;#39;host&amp;#39;],$database[&amp;#39;user&amp;#39;],$database[&amp;#39;password&amp;#39;],$database[&amp;#39;database&amp;#39;])&amp;nbsp;or&amp;nbsp;die&amp;nbsp;(&amp;#39;Connect&amp;nbsp;mysql&amp;nbsp;failed&amp;nbsp;~~&amp;#39;.mysqli_connect_error());&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/login&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;login($nickname,$username,$password)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;session_start();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`id`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`username`&amp;nbsp;=&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$now&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($row[&amp;#39;id&amp;#39;])&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;update&amp;nbsp;`users`&amp;nbsp;set&amp;nbsp;`nickname`&amp;nbsp;=&amp;nbsp;&amp;#39;{$nickname}&amp;#39;&amp;nbsp;,&amp;nbsp;`username`&amp;nbsp;=&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;,`password`&amp;nbsp;=&amp;nbsp;md5(&amp;#39;{$password}&amp;#39;)&amp;nbsp;,&amp;nbsp;`login_time`&amp;nbsp;=&amp;nbsp;&amp;#39;{$now}&amp;#39;&amp;nbsp;,&amp;nbsp;`login_num`&amp;nbsp;=&amp;nbsp;(`login_num`&amp;nbsp;+&amp;nbsp;1)&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;=&amp;nbsp;{$row[&amp;#39;id&amp;#39;]}&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`users`&amp;nbsp;(`nickname`,`username`,`password`,`login_time`,`login_num`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$nickname}&amp;#39;&amp;nbsp;,&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;,&amp;nbsp;md5(&amp;#39;{$password}&amp;#39;)&amp;nbsp;,&amp;nbsp;&amp;#39;{$now}&amp;#39;&amp;nbsp;,&amp;#39;1&amp;#39;)&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$user_id&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;insert_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;]&amp;nbsp;=&amp;nbsp;$row[&amp;#39;id&amp;#39;]&amp;nbsp;?&amp;nbsp;$row[&amp;#39;id&amp;#39;]&amp;nbsp;:&amp;nbsp;&amp;nbsp;$user_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$_SESSION[&amp;#39;nickname&amp;#39;]&amp;nbsp;=&amp;nbsp;$nickname;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;1;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/add&amp;nbsp;friend&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;addFriend($from_uid,$to_uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;`friend`&amp;nbsp;where&amp;nbsp;`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$is_friend&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$is_friend[&amp;#39;to_uid&amp;#39;]){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($from_uid&amp;nbsp;==&amp;nbsp;$to_uid)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;2;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`nickname`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$nickname&amp;nbsp;=&amp;nbsp;$ret[&amp;#39;nickname&amp;#39;];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($nickname){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`friend`&amp;nbsp;(`from_uid`,`to_uid`,`nickname`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$from_uid}&amp;#39;,&amp;#39;{$to_uid}&amp;#39;,&amp;#39;{$nickname}&amp;#39;)&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;array(&amp;#39;to_uid&amp;#39;=&amp;gt;$to_uid,&amp;#39;nickname&amp;#39;=&amp;gt;$nickname);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;3;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;4;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/friend&amp;nbsp;lists&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;friendLists($from_uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`id`,`nickname`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;!=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$lists&amp;nbsp;=&amp;nbsp;[];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;($row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql_1&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`fd`&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$row[&amp;#39;id&amp;#39;]}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$query_1&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql_1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query_1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row[&amp;#39;status&amp;#39;]&amp;nbsp;=&amp;nbsp;$ret[&amp;#39;fd&amp;#39;]&amp;nbsp;?&amp;nbsp;&amp;#39;online&amp;#39;&amp;nbsp;:&amp;nbsp;&amp;#39;offline&amp;#39;&amp;nbsp;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$lists[]&amp;nbsp;=&amp;nbsp;$row;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$lists;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/load&amp;nbsp;history&amp;nbsp;message&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;loadHistory($from_uid,$to_uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`from_uid`,`to_uid`,`message`,`send_time`&amp;nbsp;from&amp;nbsp;`chat`&amp;nbsp;where&amp;nbsp;&amp;nbsp;(&amp;nbsp;(`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;)&amp;nbsp;or&amp;nbsp;(`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;)&amp;nbsp;)&amp;nbsp;order&amp;nbsp;by&amp;nbsp;`send_time`&amp;nbsp;desc&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message&amp;nbsp;=&amp;nbsp;[];&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;($row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message[]&amp;nbsp;=&amp;nbsp;$row;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$message;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/send&amp;nbsp;message&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;sendMessage($from_uid,$to_uid,$message)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$time&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`chat`&amp;nbsp;(`from_uid`,`to_uid`,`message`,`send_time`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$from_uid}&amp;#39;,&amp;#39;{$to_uid}&amp;#39;,&amp;#39;{$message}&amp;#39;,&amp;#39;{$time}&amp;#39;)&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$last_id&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;insert_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$last_id;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/get&amp;nbsp;fd&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;getFd($uid)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`fd`&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$uid}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$row[&amp;#39;fd&amp;#39;]&amp;nbsp;?&amp;nbsp;$row[&amp;#39;fd&amp;#39;]&amp;nbsp;:&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/bind&amp;nbsp;fd&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;bindFd($uid,$fd)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`fd_tmp`&amp;nbsp;(`fd`,`uid`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$fd}&amp;#39;,&amp;#39;{$uid}&amp;#39;)&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$fd;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/unbind&amp;nbsp;fd&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;unbindFd($fd)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;delete&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`fd`&amp;nbsp;=&amp;nbsp;&amp;#39;{$fd}&amp;#39;&amp;nbsp;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;1;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__destruct()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mysqli_close($this-&amp;gt;conn);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;}&amp;nbsp;\/\/process&amp;nbsp;ajax&amp;nbsp;request&amp;nbsp;if($_POST&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;isset($_POST[&amp;#39;typ&amp;#39;]))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$action&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Action();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;switch&amp;nbsp;($_POST[&amp;#39;typ&amp;#39;])&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;login&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;login($_POST[&amp;#39;nickname&amp;#39;],$_POST[&amp;#39;username&amp;#39;],$_POST[&amp;#39;password&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;addFriend&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;addFriend($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;friendLists&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;friendLists($_POST[&amp;#39;from_uid&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;loadHistory&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;loadHistory($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;sendMessage&amp;#39;:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;sendMessage($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;],$_POST[&amp;#39;message&amp;#39;]);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;json_encode(array(&amp;#39;data&amp;#39;=&amp;gt;$ret));&amp;nbsp;}&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.3\u3001websocket.php\u6587\u4ef6&lt;\/p&gt;&lt;pre class=&quot;brush:php;toolbar:false&quot;&gt;&amp;lt;?php\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;require_once(__DIR__.&amp;#39;\/action.php&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;new&amp;nbsp;Websocket();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;class&amp;nbsp;Websocket{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$serv;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$action;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__construct()\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action&amp;nbsp;=&amp;nbsp;new&amp;nbsp;action();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv&amp;nbsp;=&amp;nbsp;new&amp;nbsp;swoole_websocket_server(&amp;#39;0.0.0.0&amp;#39;,9502);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;open&amp;#39;,array($this,&amp;#39;onOpen&amp;#39;));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;message&amp;#39;,array($this,&amp;#39;onMessage&amp;#39;));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;close&amp;#39;,array($this,&amp;#39;onClose&amp;#39;));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;start();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onOpen($server,$request)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;quot;Welcome&amp;nbsp;{$request-&amp;gt;fd}&amp;nbsp;\\\\\\\\n&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onMessage($server,$request)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data&amp;nbsp;=&amp;nbsp;json_decode($request-&amp;gt;data);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$from_uid&amp;nbsp;=&amp;nbsp;$data-&amp;gt;from_uid;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$to_uid&amp;nbsp;=&amp;nbsp;$data-&amp;gt;to_uid;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message&amp;nbsp;=&amp;nbsp;$data-&amp;gt;message;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action-&amp;gt;unbindFd($from_uid);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$from_fd&amp;nbsp;=&amp;nbsp;$this-&amp;gt;action-&amp;gt;bindFd($from_uid,$request-&amp;gt;fd);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($from_fd)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$to_fd&amp;nbsp;=&amp;nbsp;$this-&amp;gt;action-&amp;gt;getFd($to_uid);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($to_fd)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$server-&amp;gt;push($to_fd,$message);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$server-&amp;gt;push($request-&amp;gt;fd,&amp;#39;bind&amp;nbsp;from_fd&amp;nbsp;failed&amp;nbsp;~~&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onClose($server,$fd)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action-&amp;gt;unbindFd($fd);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;quot;Goodbye&amp;nbsp;{$fd}&amp;nbsp;\\\\\\\\n&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n}&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.4\u3001index.php\u9996\u9875\u804a\u5929\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;?php&amp;nbsp;session_start();&amp;nbsp;if(!$_SESSION[&amp;#39;nickname&amp;#39;]&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;!$_SESSION[&amp;#39;uid&amp;#39;]){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;#39;&amp;lt;script&amp;gt;window.location.href=&amp;quot;login.html&amp;quot;;&amp;lt;\/script&amp;gt;&amp;#39;;&amp;nbsp;}&amp;nbsp;?&amp;gt;&amp;nbsp;&amp;lt;!DOCTYPE&amp;nbsp;html&amp;gt;&amp;nbsp;&amp;lt;html&amp;nbsp;lang=&amp;quot;en&amp;quot;&amp;gt;&amp;nbsp;&amp;lt;head&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;charset=&amp;quot;UTF-8&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;http-equiv=&amp;quot;X-UA-Compatible&amp;quot;&amp;nbsp;content=&amp;quot;IE=edge&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-capable&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-touch-fullscreen&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-status-bar-style&amp;quot;&amp;nbsp;content=&amp;quot;black&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;pragma&amp;quot;&amp;nbsp;CONTENT=&amp;quot;no-cache&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;Cache-Control&amp;quot;&amp;nbsp;CONTENT=&amp;quot;no-cache,&amp;nbsp;must-revalidate&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;expires&amp;quot;&amp;nbsp;CONTENT=&amp;quot;0&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;msapplication-tap-highlight&amp;quot;&amp;nbsp;content=&amp;quot;no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;viewport&amp;quot;&amp;nbsp;content=&amp;quot;initial-scale=1,maximum-scale=1,minimum-scale=1&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;webqq----swoole&amp;lt;\/title&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;nbsp;src=&amp;quot;js\/jquery.js&amp;quot;&amp;gt;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;style&amp;nbsp;type=&amp;quot;text\/css&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;html,body{margin:0;padding:&amp;nbsp;0;background-color:&amp;nbsp;#eee;background-image:&amp;nbsp;url(&amp;quot;.\/images\/1.jpg&amp;quot;)&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.userlists{width:280px;height:&amp;nbsp;620px;border:1px&amp;nbsp;#222&amp;nbsp;solid;box-shadow:3px&amp;nbsp;3px&amp;nbsp;10px&amp;nbsp;#222;border-radius:5px;margin:100px&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;100px;background-color:&amp;nbsp;#fff}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.userlists-title{background-color:&amp;nbsp;#222;color:#fff;height:&amp;nbsp;50px;padding-top:10px;text-align:&amp;nbsp;center;border-radius:&amp;nbsp;5px&amp;nbsp;5px&amp;nbsp;0px&amp;nbsp;0px;position:&amp;nbsp;relative;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left{height:&amp;nbsp;500px;overflow-y:scroll;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left::-webkit-scrollbar&amp;nbsp;{display:none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;ul,li{margin:0px;padding:0px;list-style:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;li{border-bottom:&amp;nbsp;&amp;nbsp;1px&amp;nbsp;#666&amp;nbsp;solid;height:&amp;nbsp;35px;line-height:&amp;nbsp;35px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;li&amp;nbsp;a{text-decoration:&amp;nbsp;none;color:#000;height:&amp;nbsp;100%;display:&amp;nbsp;block;padding-left:&amp;nbsp;10px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.tools{border-radius:&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;5px&amp;nbsp;5px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.h10{height:&amp;nbsp;10px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.h30{height:&amp;nbsp;500px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.circular{height:&amp;nbsp;30px;width:&amp;nbsp;30px;border-radius:&amp;nbsp;30px;background-color:&amp;nbsp;#fff;margin:0&amp;nbsp;auto;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.find{height:&amp;nbsp;40px;line-height:40px;text-align:center;background-color:&amp;nbsp;#ccc}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.find&amp;nbsp;input{outline:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.dialogue{width:&amp;nbsp;600px;height:&amp;nbsp;600px;background-color:&amp;nbsp;#fff;position:&amp;nbsp;absolute;top:100px;left:&amp;nbsp;450px;border-radius:&amp;nbsp;5px\uff1bborder:1px&amp;nbsp;#222&amp;nbsp;solid;box-shadow:3px&amp;nbsp;5px&amp;nbsp;5px&amp;nbsp;#222;border-radius:5px;display:&amp;nbsp;none;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.close{border:1px&amp;nbsp;#fff&amp;nbsp;solid;border-radius:5px;display:&amp;nbsp;inline-block;width:&amp;nbsp;50px;height:&amp;nbsp;25px;line-height:&amp;nbsp;25px;position:&amp;nbsp;absolute;right:&amp;nbsp;15px;top:12px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send{height:&amp;nbsp;50px;line-height:&amp;nbsp;50px;background-color:&amp;nbsp;#222;border-radius:&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;5px&amp;nbsp;5px;text-align:&amp;nbsp;center;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send&amp;nbsp;input[name=&amp;#39;content&amp;#39;]{height:&amp;nbsp;30px;width:480px;padding:0px&amp;nbsp;5px;outline:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send&amp;nbsp;input[name=&amp;#39;sendBtn&amp;#39;]{height:&amp;nbsp;34px;width:80px;display:&amp;nbsp;inline-block;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.chat-line{width:360px;border-radius:&amp;nbsp;10px;margin:10px;padding:&amp;nbsp;10px;word-wrap:break-word}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.from{border:1px&amp;nbsp;red&amp;nbsp;solid;float:&amp;nbsp;right;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.to{border:1px&amp;nbsp;green&amp;nbsp;solid;float:&amp;nbsp;left;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.all{position:&amp;nbsp;absolute;top:0;right:&amp;nbsp;100px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.scroll_box{position:&amp;nbsp;relative;overflow-y:scroll;height:&amp;nbsp;500px};&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.scroll_box::-webkit-scrollbar&amp;nbsp;{display:none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists&amp;nbsp;&amp;nbsp;{position:&amp;nbsp;absolute;left:&amp;nbsp;0;top:&amp;nbsp;0;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/style&amp;gt;&amp;nbsp;&amp;lt;\/head&amp;gt;&amp;nbsp;&amp;lt;body&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists-title&amp;quot;&amp;gt;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;nickname&amp;#39;];?&amp;gt;&amp;lt;br&amp;gt;\u597d\u53cb\u5217\u8868&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;lists_left&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;ul&amp;nbsp;id=&amp;quot;friend_lists&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/ul&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists-title&amp;nbsp;tools&amp;quot;&amp;gt;&amp;lt;div&amp;nbsp;class=&amp;quot;h10&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;lt;div&amp;nbsp;class=&amp;quot;circular&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;dialogue&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists-title&amp;quot;&amp;gt;\u6b63\u5728\u4e0e&amp;nbsp;&amp;lt;t&amp;nbsp;id=&amp;quot;uname&amp;quot;&amp;gt;.....&amp;lt;\/t&amp;gt;&amp;nbsp;\u804a\u5929&amp;nbsp;&amp;lt;span&amp;nbsp;class=&amp;quot;close&amp;quot;&amp;gt;\u5173\u95ed&amp;lt;\/span&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;scroll_box&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;lists&amp;nbsp;&amp;quot;&amp;nbsp;id=&amp;quot;chat-box&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;send&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;hidden&amp;quot;&amp;nbsp;name=&amp;quot;to_uid&amp;quot;&amp;nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;content&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u53d1\u9001\u5185\u5bb9&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;button&amp;quot;&amp;nbsp;name=&amp;quot;sendBtn&amp;quot;&amp;nbsp;id=&amp;quot;sendMessage&amp;quot;&amp;nbsp;value=&amp;quot;\u53d1\u9001&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{from_uid:&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,typ:&amp;#39;friendLists&amp;#39;},function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(var&amp;nbsp;i&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;i&amp;lt;&amp;nbsp;r.data.length;&amp;nbsp;i++)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;status&amp;nbsp;=&amp;nbsp;r.data[i].status&amp;nbsp;==&amp;quot;offline&amp;quot;&amp;nbsp;?&amp;nbsp;&amp;quot;\u79bb\u7ebf&amp;quot;&amp;nbsp;:&amp;nbsp;&amp;quot;\u5728\u7ebf&amp;quot;&amp;nbsp;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;li&amp;gt;&amp;lt;a&amp;nbsp;data-id=&amp;quot;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].id&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;quot;&amp;nbsp;data-nickname=&amp;quot;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].nickname&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;quot;&amp;nbsp;href=&amp;quot;javascript:;&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;&amp;nbsp;r.data[i].nickname&amp;nbsp;+&amp;nbsp;&amp;quot;&amp;nbsp;&amp;amp;nbsp;(&amp;nbsp;&amp;quot;&amp;nbsp;+&amp;nbsp;status&amp;nbsp;+&amp;#39;&amp;nbsp;)&amp;nbsp;&amp;lt;\/a&amp;gt;&amp;lt;\/li&amp;gt;&amp;#39;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#friend_lists&amp;quot;).html(h);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#friend_lists&amp;quot;).on(&amp;quot;click&amp;quot;,&amp;quot;.friend&amp;quot;,function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;to_uid&amp;nbsp;=&amp;nbsp;$(this).attr(&amp;quot;data-id&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;nickname&amp;nbsp;=&amp;nbsp;$(this).attr(&amp;quot;data-nickname&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#uname&amp;quot;).html(nickname);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;to_uid&amp;#39;]&amp;quot;).val(to_uid);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{from_uid:&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,to_uid:to_uid,typ:&amp;quot;loadHistory&amp;quot;},function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for&amp;nbsp;(var&amp;nbsp;i&amp;nbsp;=&amp;nbsp;r.data.length&amp;nbsp;-&amp;nbsp;1;&amp;nbsp;i&amp;nbsp;&amp;gt;=&amp;nbsp;0;&amp;nbsp;i--)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data[i].from_uid&amp;nbsp;==&amp;nbsp;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;from&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].message&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;to&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].message&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).html(h);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.dialogue&amp;quot;).show();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#sendMessage&amp;quot;).on(&amp;quot;click&amp;quot;,function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val())&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sendMessage();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;please&amp;nbsp;input&amp;nbsp;your&amp;nbsp;message~&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(document).keyup(function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(evt.keyCode&amp;nbsp;==&amp;nbsp;13)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val())&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sendMessage();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;please&amp;nbsp;input&amp;nbsp;your&amp;nbsp;message~&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.close&amp;quot;).on(&amp;quot;click&amp;quot;,function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.dialogue&amp;quot;).hide();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;srcollBox(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;$(&amp;quot;.lists&amp;quot;).height();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.scroll_box&amp;quot;).scrollTop(h,4000)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(window.WebSocket){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;ws&amp;nbsp;=&amp;nbsp;new&amp;nbsp;WebSocket(&amp;quot;ws:\/\/192.168.0.140:9502&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onopen&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;Connect&amp;nbsp;WebSocket&amp;nbsp;succuess&amp;nbsp;~~&amp;nbsp;\\\\\\\\\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onmessage&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).append(&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;to&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;evt.data&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;message&amp;nbsp;on&amp;nbsp;server&amp;nbsp;:&amp;nbsp;&amp;quot;&amp;nbsp;+&amp;nbsp;evt.data&amp;nbsp;+&amp;nbsp;&amp;quot;\\\\\\\\\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onclose&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;WebSocket&amp;nbsp;closed&amp;nbsp;~~\\\\\\\\\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onerror&amp;nbsp;=&amp;nbsp;function(evt){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;Connect&amp;nbsp;WebSocket&amp;nbsp;failed&amp;nbsp;~~\\\\\\\\\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;sendMessage(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;params&amp;nbsp;=&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;from_uid&amp;nbsp;:&amp;nbsp;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;to_uid&amp;nbsp;:&amp;nbsp;$(&amp;quot;input[name=&amp;#39;to_uid&amp;#39;]&amp;quot;).val(),&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;message&amp;nbsp;:&amp;nbsp;$(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val(),&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;typ&amp;nbsp;:&amp;nbsp;&amp;quot;sendMessage&amp;quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;};&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;msg&amp;nbsp;=&amp;nbsp;JSON.stringify(params);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).append(&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;from&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;$(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val()&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,params,function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.send(msg);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;send&amp;nbsp;message&amp;nbsp;failed&amp;nbsp;,&amp;nbsp;insert&amp;nbsp;mysql&amp;nbsp;failed~~\\\\\\\\\\\\\\\\n&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;Your&amp;nbsp;browser&amp;nbsp;does&amp;nbsp;not&amp;nbsp;support&amp;nbsp;WebSocket&amp;nbsp;!&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;lt;\/body&amp;gt;&amp;nbsp;&amp;lt;\/html&amp;gt;&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.5\u3001login.html \u767b\u5f55\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;&amp;lt;!DOCTYPE&amp;nbsp;html&amp;gt;&amp;nbsp;&amp;lt;html&amp;nbsp;lang=&amp;quot;en&amp;quot;&amp;gt;&amp;nbsp;&amp;lt;head&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;charset=&amp;quot;UTF-8&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;http-equiv=&amp;quot;X-UA-Compatible&amp;quot;&amp;nbsp;content=&amp;quot;IE=edge&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-capable&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-touch-fullscreen&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-status-bar-style&amp;quot;&amp;nbsp;content=&amp;quot;black&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;msapplication-tap-highlight&amp;quot;&amp;nbsp;content=&amp;quot;no&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;viewport&amp;quot;&amp;nbsp;content=&amp;quot;initial-scale=1,maximum-scale=1,minimum-scale=1&amp;quot;&amp;nbsp;\/&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;webqq----swoole&amp;lt;\/title&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;nbsp;src=&amp;quot;.\/js\/jquery.js&amp;quot;&amp;gt;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;style&amp;nbsp;type=&amp;quot;text\/css&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;html,body{margin:0;padding:&amp;nbsp;0;background-color:&amp;nbsp;#eee}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.login-form{background-color:&amp;nbsp;#fff;width:&amp;nbsp;500px;height:&amp;nbsp;500px;margin:100px&amp;nbsp;auto;border:1px&amp;nbsp;#ccc&amp;nbsp;solid;border-radius:&amp;nbsp;5px;box-shadow:&amp;nbsp;3px&amp;nbsp;3px&amp;nbsp;3px&amp;nbsp;#666}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h3{text-align:&amp;nbsp;center;margin-top:&amp;nbsp;100px}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container{text-align:&amp;nbsp;center;margin-top:&amp;nbsp;30px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container&amp;nbsp;label{display:&amp;nbsp;inline-block;width:&amp;nbsp;50px;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container&amp;nbsp;input{display:&amp;nbsp;inline-block;height:&amp;nbsp;25px;line-height:&amp;nbsp;25px;padding:&amp;nbsp;0px&amp;nbsp;5px;width:&amp;nbsp;300px;outline:&amp;nbsp;none}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;input[name=&amp;#39;login&amp;#39;]{background-color:&amp;nbsp;#5aba1f;color:#fff;border:none;width:&amp;nbsp;150px;height:&amp;nbsp;30px;line-height:&amp;nbsp;30px;border-radius:&amp;nbsp;5px;margin-top:&amp;nbsp;30px;cursor:&amp;nbsp;pointer;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.warning{border:2px&amp;nbsp;#f00&amp;nbsp;solid;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/style&amp;gt;&amp;nbsp;&amp;lt;\/head&amp;gt;&amp;nbsp;&amp;lt;body&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;form&amp;nbsp;method=&amp;quot;post&amp;quot;&amp;nbsp;action=&amp;quot;&amp;quot;&amp;nbsp;class=&amp;quot;login-form&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;h3&amp;gt;WebQQ&amp;lt;\/h3&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;label&amp;gt;\u6635\u79f0:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;nickname&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u6635\u79f0&amp;quot;&amp;nbsp;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;label&amp;gt;\u5e10\u53f7:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;username&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u7528\u6237&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;label&amp;gt;\u5bc6\u7801:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;password&amp;quot;&amp;nbsp;name=&amp;quot;password&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u5bc6\u7801&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;container&amp;quot;&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;button&amp;quot;&amp;nbsp;name=&amp;quot;login&amp;quot;&amp;nbsp;value=&amp;quot;\u767b\u5f55&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/form&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;login&amp;#39;]&amp;quot;).click(function(){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;nickname&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).val();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;username&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).val();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;password&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).val();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(nickname&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8bbe\u7f6e\u6635\u79f0&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).focus();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(username&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8f93\u5165\u5e10\u53f7&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).focus();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(password&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;)&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8f93\u5165\u5bc6\u7801&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).focus();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{nickname:nickname,username:username,password:password,typ:&amp;#39;login&amp;#39;},function(res){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data&amp;nbsp;==&amp;nbsp;&amp;quot;1&amp;quot;){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;window.location.href=&amp;quot;index.php&amp;quot;;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;failed~~&amp;quot;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/script&amp;gt;&amp;nbsp;&amp;lt;\/body&amp;gt;&amp;nbsp;&amp;lt;\/html&amp;gt;&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.6\u3001webqq.sql \u6570\u636e\u7ed3\u6784\u6587\u4ef6&lt;\/p&gt;&lt;pre style=&quot;box-sizing: border-box;overflow: auto;font-family: &amp;#39;Source Code Pro&amp;#39;, Consolas, Menlo, Monaco, &amp;#39;Courier New&amp;#39;, monospace;font-size: 0.93em;padding: 1em;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 1.45;word-wrap: break-word;color: rgb(51, 51, 51);background: url(&amp;#39;..\/img\/blueprint.png&amp;#39;) 0% 0% \/ 30px, 0% 0% \/ 30px rgb(246, 246, 246);border: none;border-radius: 4px;max-height: 35em;position: relative&quot;&gt;--&amp;nbsp;Adminer&amp;nbsp;4.1.0&amp;nbsp;MySQL&amp;nbsp;dump&amp;nbsp;SET&amp;nbsp;NAMES&amp;nbsp;utf8;&amp;nbsp;SET&amp;nbsp;time_zone&amp;nbsp;=&amp;nbsp;&amp;#39;+00:00&amp;#39;;&amp;nbsp;SET&amp;nbsp;foreign_key_checks&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;SET&amp;nbsp;sql_mode&amp;nbsp;=&amp;nbsp;&amp;#39;NO_AUTO_VALUE_ON_ZERO&amp;#39;;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`chat`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`chat`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;ID&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`from_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`to_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`message`&amp;nbsp;varchar(255)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`send_time`&amp;nbsp;timestamp&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;DEFAULT&amp;nbsp;&amp;#39;0000-00-00&amp;nbsp;00:00:00&amp;#39;&amp;nbsp;ON&amp;nbsp;UPDATE&amp;nbsp;CURRENT_TIMESTAMP,&amp;nbsp;&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`fd_tmp`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`fd_tmp`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`fd`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;FD\u503c\u4e0e\u7528\u6237ID\u7ed1\u5b9a&amp;#39;;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`friend`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`friend`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`from_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;DEFAULT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`to_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,&amp;nbsp;&amp;nbsp;&amp;nbsp;`nickname`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;\u597d\u53cb\u5217\u8868&amp;#39;;&amp;nbsp;DROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`users`;&amp;nbsp;CREATE&amp;nbsp;TABLE&amp;nbsp;`users`&amp;nbsp;(&amp;nbsp;&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;ID&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`nickname`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u6635\u79f0&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`username`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u540d\u79f0&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`password`&amp;nbsp;char(32)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u5bc6\u7801&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`login_time`&amp;nbsp;datetime&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u6700\u540e\u767b\u9646\u65f6\u95f4&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;`login_num`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;DEFAULT&amp;nbsp;&amp;#39;0&amp;#39;&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u6b21\u6570&amp;#39;,&amp;nbsp;&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)&amp;nbsp;)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;\u7528\u6237\u5217\u8868&amp;#39;;&amp;nbsp;--&amp;nbsp;2018-03-27&amp;nbsp;10:05:35&lt;\/pre&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 1.5em;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;4.7\u3001\u670d\u52a1\u5668\u73af\u5883centos7 + mariadb + swoole + apache + php7&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;\u6ce8\u610f\u4e8b\u9879\uff1a\u987b\u5b89\u88c5swoole\u6269\u5c55\uff0cLinux\u670d\u52a1\u5668\uff0cPHP7+\u7248\u672c\u4ee5\u4e0a&lt;br style=&quot;box-sizing: border-box&quot;\/&gt;\u8fdb\u884c\u9879\u76ee\u6839\u76ee\u5f55\u4f7f\u7528: php websocket.php \u6267\u884c\u8be5\u6587\u4ef6&lt;\/p&gt;&lt;p style=&quot;box-sizing: border-box;margin-top: 1.5em;margin-bottom: 0px;color: rgb(51, 51, 51);font-family: -apple-system, &amp;#39;Helvetica Neue&amp;#39;, Helvetica, Arial, &amp;#39;PingFang SC&amp;#39;, &amp;#39;Hiragino Sans GB&amp;#39;, &amp;#39;WenQuanYi Micro Hei&amp;#39;, &amp;#39;Microsoft Yahei&amp;#39;, sans-serif;font-size: 14px;white-space: normal;background-color: rgb(255, 255, 255)&quot;&gt;\u6e90\u7801\u4e0b\u8f7d\u5730\u5740\uff1a&lt;a href=&quot;https:\/\/pan.baidu.com\/s\/1sWY-2zTj8slm9O7HCR-49w&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot; style=&quot;box-sizing: border-box;background: transparent;color: rgb(0, 154, 97);outline: 0px;border-bottom: 1px solid rgba(0, 154, 97, 0.25);padding-bottom: 1px&quot;&gt;https:\/\/pan.baidu.com\/s\/1sWY-...&lt;\/a&gt;&lt;\/p&gt;&lt;p&gt;&lt;br\/&gt;&lt;\/p&gt;', `update_time` = '2018-04-19 15:40:52' WHERE `id` = 7"]
[2018-04-19 15:40:54] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:40:54] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 12 OFFSET 0"]
[2018-04-19 15:40:56] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:40:56] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:40:56] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 1 OFFSET 0"]
[2018-04-19 15:49:48] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:49:48] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:49:48] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 1 OFFSET 0"]
[2018-04-19 15:50:06] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:50:06] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:50:06] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 1 OFFSET 0"]
[2018-04-19 15:50:52] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:50:52] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:50:52] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 1 OFFSET 0"]
[2018-04-19 15:51:08] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:51:08] ["SELECT `id`,`pid`,`title`,`content` FROM `frame_articles` WHERE `id` = 7 LIMIT 1"]
[2018-04-19 15:59:20] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:59:20] ["UPDATE `frame_articles` SET `pid` = '9', `id` = '7', `title` = 'php+swoole+mysql \u4effwebqq\u53ca\u65f6\u804a\u5929', `content` = '&lt;p&gt;\u4e00\u3001\u6570\u636e\u5e93\u914d\u7f6e\u6587\u4ef6\u3002config.php&lt;br\/&gt;&lt;\/p&gt;&lt;pre class=&quot;brush:php;toolbar:false&quot;&gt;&amp;lt;?php\\r\\n$database&amp;nbsp;=&amp;nbsp;array(\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;host&amp;#39;=&amp;gt;&amp;#39;127.0.0.1&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;user&amp;#39;=&amp;gt;&amp;#39;root&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;password&amp;#39;=&amp;gt;&amp;#39;4f54dd&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;port&amp;#39;=&amp;gt;3306,\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;database&amp;#39;=&amp;gt;&amp;#39;webqq&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;#39;charset&amp;#39;=&amp;gt;&amp;#39;utf8&amp;#39;\\r\\n);&lt;\/pre&gt;&lt;p&gt;\u4e8c\u3001\u6570\u636e\u5e93\u64cd\u4f5c\u7c7b\u3002action.php&lt;\/p&gt;&lt;pre class=&quot;brush:php;toolbar:false&quot;&gt;&amp;lt;?php\\r\\nclass&amp;nbsp;Action\\r\\n{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$conn;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__construct()\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;require_once&amp;nbsp;(__DIR__.&amp;#39;\/config.php&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn&amp;nbsp;=&amp;nbsp;mysqli_connect($database[&amp;#39;host&amp;#39;],$database[&amp;#39;user&amp;#39;],$database[&amp;#39;password&amp;#39;],$database[&amp;#39;database&amp;#39;])&amp;nbsp;or&amp;nbsp;die&amp;nbsp;(&amp;#39;Connect&amp;nbsp;mysql&amp;nbsp;failed&amp;nbsp;~~&amp;#39;.mysqli_connect_error());\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/login\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;login($nickname,$username,$password)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;session_start();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`id`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`username`&amp;nbsp;=&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$now&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($row[&amp;#39;id&amp;#39;])&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;update&amp;nbsp;`users`&amp;nbsp;set&amp;nbsp;`nickname`&amp;nbsp;=&amp;nbsp;&amp;#39;{$nickname}&amp;#39;&amp;nbsp;,&amp;nbsp;`username`&amp;nbsp;=&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;,`password`&amp;nbsp;=&amp;nbsp;md5(&amp;#39;{$password}&amp;#39;)&amp;nbsp;,&amp;nbsp;`login_time`&amp;nbsp;=&amp;nbsp;&amp;#39;{$now}&amp;#39;&amp;nbsp;,&amp;nbsp;`login_num`&amp;nbsp;=&amp;nbsp;(`login_num`&amp;nbsp;+&amp;nbsp;1)&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;=&amp;nbsp;{$row[&amp;#39;id&amp;#39;]}&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`users`&amp;nbsp;(`nickname`,`username`,`password`,`login_time`,`login_num`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$nickname}&amp;#39;&amp;nbsp;,&amp;nbsp;&amp;#39;{$username}&amp;#39;&amp;nbsp;,&amp;nbsp;md5(&amp;#39;{$password}&amp;#39;)&amp;nbsp;,&amp;nbsp;&amp;#39;{$now}&amp;#39;&amp;nbsp;,&amp;#39;1&amp;#39;)&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$user_id&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;insert_id;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;]&amp;nbsp;=&amp;nbsp;$row[&amp;#39;id&amp;#39;]&amp;nbsp;?&amp;nbsp;$row[&amp;#39;id&amp;#39;]&amp;nbsp;:&amp;nbsp;&amp;nbsp;$user_id;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$_SESSION[&amp;#39;nickname&amp;#39;]&amp;nbsp;=&amp;nbsp;$nickname;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;1;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/add&amp;nbsp;friend\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;addFriend($from_uid,$to_uid)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;*&amp;nbsp;from&amp;nbsp;`friend`&amp;nbsp;where&amp;nbsp;`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$is_friend&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!$is_friend[&amp;#39;to_uid&amp;#39;]){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($from_uid&amp;nbsp;==&amp;nbsp;$to_uid)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;2;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`nickname`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$nickname&amp;nbsp;=&amp;nbsp;$ret[&amp;#39;nickname&amp;#39;];\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($nickname){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`friend`&amp;nbsp;(`from_uid`,`to_uid`,`nickname`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$from_uid}&amp;#39;,&amp;#39;{$to_uid}&amp;#39;,&amp;#39;{$nickname}&amp;#39;)&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;array(&amp;#39;to_uid&amp;#39;=&amp;gt;$to_uid,&amp;#39;nickname&amp;#39;=&amp;gt;$nickname);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;3;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;4;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/friend&amp;nbsp;lists\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;friendLists($from_uid)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`id`,`nickname`&amp;nbsp;from&amp;nbsp;`users`&amp;nbsp;where&amp;nbsp;`id`&amp;nbsp;!=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$lists&amp;nbsp;=&amp;nbsp;[];\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;($row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql_1&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`fd`&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$row[&amp;#39;id&amp;#39;]}&amp;#39;&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$query_1&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql_1);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query_1);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row[&amp;#39;status&amp;#39;]&amp;nbsp;=&amp;nbsp;$ret[&amp;#39;fd&amp;#39;]&amp;nbsp;?&amp;nbsp;&amp;#39;online&amp;#39;&amp;nbsp;:&amp;nbsp;&amp;#39;offline&amp;#39;&amp;nbsp;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$lists[]&amp;nbsp;=&amp;nbsp;$row;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$lists;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/load&amp;nbsp;history&amp;nbsp;message\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;loadHistory($from_uid,$to_uid)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`from_uid`,`to_uid`,`message`,`send_time`&amp;nbsp;from&amp;nbsp;`chat`&amp;nbsp;where&amp;nbsp;&amp;nbsp;(&amp;nbsp;(`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;)&amp;nbsp;or&amp;nbsp;(`to_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$from_uid}&amp;#39;&amp;nbsp;and&amp;nbsp;`from_uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$to_uid}&amp;#39;)&amp;nbsp;)&amp;nbsp;order&amp;nbsp;by&amp;nbsp;`send_time`&amp;nbsp;desc&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message&amp;nbsp;=&amp;nbsp;[];\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;($row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message[]&amp;nbsp;=&amp;nbsp;$row;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$message;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/send&amp;nbsp;message\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;sendMessage($from_uid,$to_uid,$message)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$time&amp;nbsp;=&amp;nbsp;date(&amp;#39;Y-m-d&amp;nbsp;H:i:s&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`chat`&amp;nbsp;(`from_uid`,`to_uid`,`message`,`send_time`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$from_uid}&amp;#39;,&amp;#39;{$to_uid}&amp;#39;,&amp;#39;{$message}&amp;#39;,&amp;#39;{$time}&amp;#39;)&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$last_id&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;insert_id;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$last_id;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/get&amp;nbsp;fd&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;getFd($uid)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;select&amp;nbsp;`fd`&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`uid`&amp;nbsp;=&amp;nbsp;&amp;#39;{$uid}&amp;#39;&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($query&amp;nbsp;=&amp;nbsp;$this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$row&amp;nbsp;=&amp;nbsp;mysqli_fetch_assoc($query);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$row[&amp;#39;fd&amp;#39;]&amp;nbsp;?&amp;nbsp;$row[&amp;#39;fd&amp;#39;]&amp;nbsp;:&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/bind&amp;nbsp;fd&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;bindFd($uid,$fd)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;insert&amp;nbsp;into&amp;nbsp;`fd_tmp`&amp;nbsp;(`fd`,`uid`)&amp;nbsp;values&amp;nbsp;(&amp;#39;{$fd}&amp;#39;,&amp;#39;{$uid}&amp;#39;)&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;$fd;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\/\/unbind&amp;nbsp;fd&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;unbindFd($fd)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$sql&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;nbsp;delete&amp;nbsp;from&amp;nbsp;`fd_tmp`&amp;nbsp;where&amp;nbsp;`fd`&amp;nbsp;=&amp;nbsp;&amp;#39;{$fd}&amp;#39;&amp;nbsp;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($this-&amp;gt;conn-&amp;gt;query($sql))&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;1;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;0;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__destruct()\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mysqli_close($this-&amp;gt;conn);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n}\\r\\n\\r\\n\/\/process&amp;nbsp;ajax&amp;nbsp;request\\r\\nif($_POST&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;isset($_POST[&amp;#39;typ&amp;#39;]))\\r\\n{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$action&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Action();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;switch&amp;nbsp;($_POST[&amp;#39;typ&amp;#39;])&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;login&amp;#39;:\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;login($_POST[&amp;#39;nickname&amp;#39;],$_POST[&amp;#39;username&amp;#39;],$_POST[&amp;#39;password&amp;#39;]);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;addFriend&amp;#39;:\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;addFriend($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;]);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;friendLists&amp;#39;:\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;friendLists($_POST[&amp;#39;from_uid&amp;#39;]);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;loadHistory&amp;#39;:\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;loadHistory($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;]);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;case&amp;nbsp;&amp;#39;sendMessage&amp;#39;:\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$ret&amp;nbsp;=&amp;nbsp;$action-&amp;gt;sendMessage($_POST[&amp;#39;from_uid&amp;#39;],$_POST[&amp;#39;to_uid&amp;#39;],$_POST[&amp;#39;message&amp;#39;]);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;break;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;json_encode(array(&amp;#39;data&amp;#39;=&amp;gt;$ret));\\r\\n}&lt;\/pre&gt;&lt;p&gt;\u4e09\u3001websocket.php&lt;br\/&gt;&lt;\/p&gt;&lt;pre class=&quot;brush:php;toolbar:false&quot;&gt;&amp;lt;?php\\r\\nrequire_once(__DIR__.&amp;#39;\/action.php&amp;#39;);\\r\\nnew&amp;nbsp;Websocket();\\r\\nclass&amp;nbsp;Websocket\\r\\n{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$serv;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;$action;\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;__construct()\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action&amp;nbsp;=&amp;nbsp;new&amp;nbsp;action();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv&amp;nbsp;=&amp;nbsp;new&amp;nbsp;swoole_websocket_server(&amp;#39;0.0.0.0&amp;#39;,9502);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;open&amp;#39;,array($this,&amp;#39;onOpen&amp;#39;));\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;message&amp;#39;,array($this,&amp;#39;onMessage&amp;#39;));\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;on(&amp;#39;close&amp;#39;,array($this,&amp;#39;onClose&amp;#39;));\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;serv-&amp;gt;start();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onOpen($server,$request)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;quot;Welcome&amp;nbsp;{$request-&amp;gt;fd}&amp;nbsp;\\\\\\\\n&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onMessage($server,$request)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$data&amp;nbsp;=&amp;nbsp;json_decode($request-&amp;gt;data);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$from_uid&amp;nbsp;=&amp;nbsp;$data-&amp;gt;from_uid;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$to_uid&amp;nbsp;=&amp;nbsp;$data-&amp;gt;to_uid;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$message&amp;nbsp;=&amp;nbsp;$data-&amp;gt;message;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action-&amp;gt;unbindFd($from_uid);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$from_fd&amp;nbsp;=&amp;nbsp;$this-&amp;gt;action-&amp;gt;bindFd($from_uid,$request-&amp;gt;fd);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($from_fd)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$to_fd&amp;nbsp;=&amp;nbsp;$this-&amp;gt;action-&amp;gt;getFd($to_uid);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($to_fd)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$server-&amp;gt;push($to_fd,$message);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$server-&amp;gt;push($request-&amp;gt;fd,&amp;#39;bind&amp;nbsp;from_fd&amp;nbsp;failed&amp;nbsp;~~&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;function&amp;nbsp;onClose($server,$fd)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$this-&amp;gt;action-&amp;gt;unbindFd($fd);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;quot;Goodbye&amp;nbsp;{$fd}&amp;nbsp;\\\\\\\\n&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n}&lt;\/pre&gt;&lt;p&gt;\u56db\u3001\u9996\u9875\u3002index.php&lt;br\/&gt;&lt;\/p&gt;&lt;pre class=&quot;brush:php;toolbar:false;&quot;&gt;&amp;lt;?php\\r\\nsession_start();\\r\\nif(!$_SESSION[&amp;#39;nickname&amp;#39;]&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;!$_SESSION[&amp;#39;uid&amp;#39;]){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;echo&amp;nbsp;&amp;#39;&amp;lt;script&amp;gt;window.location.href=&amp;quot;login.html&amp;quot;;&amp;lt;\/script&amp;gt;&amp;#39;;\\r\\n}\\r\\n?&amp;gt;\\r\\n&amp;lt;!DOCTYPE&amp;nbsp;html&amp;gt;\\r\\n&amp;lt;html&amp;gt;\\r\\n&amp;lt;head&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;charset=&amp;quot;UTF-8&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;http-equiv=&amp;quot;X-UA-Compatible&amp;quot;&amp;nbsp;content=&amp;quot;IE=edge&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-capable&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-touch-fullscreen&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-status-bar-style&amp;quot;&amp;nbsp;content=&amp;quot;black&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;pragma&amp;quot;&amp;nbsp;CONTENT=&amp;quot;no-cache&amp;quot;&amp;gt;&amp;nbsp;\\r\\n&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;Cache-Control&amp;quot;&amp;nbsp;CONTENT=&amp;quot;no-cache,&amp;nbsp;must-revalidate&amp;quot;&amp;gt;&amp;nbsp;\\r\\n&amp;lt;META&amp;nbsp;HTTP-EQUIV=&amp;quot;expires&amp;quot;&amp;nbsp;CONTENT=&amp;quot;0&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;msapplication-tap-highlight&amp;quot;&amp;nbsp;content=&amp;quot;no&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;viewport&amp;quot;&amp;nbsp;content=&amp;quot;initial-scale=1,maximum-scale=1,minimum-scale=1&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;webqq----swoole&amp;lt;\/title&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;nbsp;src=&amp;quot;js\/jquery.js&amp;quot;&amp;gt;&amp;lt;\/script&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;style&amp;nbsp;type=&amp;quot;text\/css&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;html,body{margin:0;padding:&amp;nbsp;0;background-color:&amp;nbsp;#eee;background-image:&amp;nbsp;url(&amp;quot;.\/images\/1.jpg&amp;quot;)&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.userlists{width:280px;height:&amp;nbsp;620px;border:1px&amp;nbsp;#222&amp;nbsp;solid;box-shadow:3px&amp;nbsp;3px&amp;nbsp;10px&amp;nbsp;#222;border-radius:5px;margin:100px&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;100px;background-color:&amp;nbsp;#fff}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.userlists-title{background-color:&amp;nbsp;#222;color:#fff;height:&amp;nbsp;50px;padding-top:10px;text-align:&amp;nbsp;center;border-radius:&amp;nbsp;5px&amp;nbsp;5px&amp;nbsp;0px&amp;nbsp;0px;position:&amp;nbsp;relative;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left{height:&amp;nbsp;500px;overflow-y:scroll;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left::-webkit-scrollbar&amp;nbsp;{display:none}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;ul,li{margin:0px;padding:0px;list-style:&amp;nbsp;none}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;li{border-bottom:&amp;nbsp;&amp;nbsp;1px&amp;nbsp;#666&amp;nbsp;solid;height:&amp;nbsp;35px;line-height:&amp;nbsp;35px;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists_left&amp;nbsp;li&amp;nbsp;a{text-decoration:&amp;nbsp;none;color:#000;height:&amp;nbsp;100%;display:&amp;nbsp;block;padding-left:&amp;nbsp;10px}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.tools{border-radius:&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;5px&amp;nbsp;5px;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.h10{height:&amp;nbsp;10px;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.h30{height:&amp;nbsp;500px}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.circular{height:&amp;nbsp;30px;width:&amp;nbsp;30px;border-radius:&amp;nbsp;30px;background-color:&amp;nbsp;#fff;margin:0&amp;nbsp;auto;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.find{height:&amp;nbsp;40px;line-height:40px;text-align:center;background-color:&amp;nbsp;#ccc}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.find&amp;nbsp;input{outline:&amp;nbsp;none}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.dialogue{width:&amp;nbsp;600px;height:&amp;nbsp;600px;background-color:&amp;nbsp;#fff;position:&amp;nbsp;absolute;top:100px;left:&amp;nbsp;450px;border-radius:&amp;nbsp;5px\uff1bborder:1px&amp;nbsp;#222&amp;nbsp;solid;box-shadow:3px&amp;nbsp;5px&amp;nbsp;5px&amp;nbsp;#222;border-radius:5px;display:&amp;nbsp;none;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.close{border:1px&amp;nbsp;#fff&amp;nbsp;solid;border-radius:5px;display:&amp;nbsp;inline-block;width:&amp;nbsp;50px;height:&amp;nbsp;25px;line-height:&amp;nbsp;25px;position:&amp;nbsp;absolute;right:&amp;nbsp;15px;top:12px;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send{height:&amp;nbsp;50px;line-height:&amp;nbsp;50px;background-color:&amp;nbsp;#222;border-radius:&amp;nbsp;0px&amp;nbsp;0px&amp;nbsp;5px&amp;nbsp;5px;text-align:&amp;nbsp;center;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send&amp;nbsp;input[name=&amp;#39;content&amp;#39;]{height:&amp;nbsp;30px;width:480px;padding:0px&amp;nbsp;5px;outline:&amp;nbsp;none}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.send&amp;nbsp;input[name=&amp;#39;sendBtn&amp;#39;]{height:&amp;nbsp;34px;width:80px;display:&amp;nbsp;inline-block;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.chat-line{width:360px;border-radius:&amp;nbsp;10px;margin:10px;padding:&amp;nbsp;10px;word-wrap:break-word}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.from{border:1px&amp;nbsp;red&amp;nbsp;solid;float:&amp;nbsp;right;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.to{border:1px&amp;nbsp;green&amp;nbsp;solid;float:&amp;nbsp;left;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.all{position:&amp;nbsp;absolute;top:0;right:&amp;nbsp;100px}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.scroll_box{position:&amp;nbsp;relative;overflow-y:scroll;height:&amp;nbsp;500px};\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.scroll_box::-webkit-scrollbar&amp;nbsp;{display:none}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.lists&amp;nbsp;&amp;nbsp;{position:&amp;nbsp;absolute;left:&amp;nbsp;0;top:&amp;nbsp;0;}\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/style&amp;gt;\\r\\n&amp;lt;\/head&amp;gt;\\r\\n&amp;lt;body&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;nickname&amp;#39;];?&amp;gt;&amp;lt;br&amp;gt;\u597d\u53cb\u5217\u8868&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;ul&amp;nbsp;id=&amp;quot;friend_lists&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/ul&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;userlists-title&amp;nbsp;tools&amp;quot;&amp;gt;&amp;lt;div&amp;gt;&amp;lt;\/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;\/div&amp;gt;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;\u6b63\u5728\u4e0e&amp;nbsp;&amp;lt;t&amp;nbsp;id=&amp;quot;uname&amp;quot;&amp;gt;.....&amp;lt;\/t&amp;gt;&amp;nbsp;\u804a\u5929&amp;nbsp;&amp;lt;span&amp;gt;\u5173\u95ed&amp;lt;\/span&amp;gt;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;nbsp;class=&amp;quot;lists&amp;nbsp;&amp;quot;&amp;nbsp;id=&amp;quot;chat-box&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;hidden&amp;quot;&amp;nbsp;name=&amp;quot;to_uid&amp;quot;&amp;nbsp;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;content&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u53d1\u9001\u5185\u5bb9&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;input&amp;nbsp;type=&amp;quot;button&amp;quot;&amp;nbsp;name=&amp;quot;sendBtn&amp;quot;&amp;nbsp;id=&amp;quot;sendMessage&amp;quot;&amp;nbsp;value=&amp;quot;\u53d1\u9001&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/div&amp;gt;\\r\\n\\r\\n\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(function(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{from_uid:&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,typ:&amp;#39;friendLists&amp;#39;},function(res){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(var&amp;nbsp;i&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;i&amp;lt;&amp;nbsp;r.data.length;&amp;nbsp;i++)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;status&amp;nbsp;=&amp;nbsp;r.data[i].status&amp;nbsp;==&amp;quot;offline&amp;quot;&amp;nbsp;?&amp;nbsp;&amp;quot;\u79bb\u7ebf&amp;quot;&amp;nbsp;:&amp;nbsp;&amp;quot;\u5728\u7ebf&amp;quot;&amp;nbsp;;&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;li&amp;gt;&amp;lt;a&amp;nbsp;data-id=&amp;quot;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].id&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;quot;&amp;nbsp;data-nickname=&amp;quot;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].nickname&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;quot;&amp;nbsp;href=&amp;quot;javascript:;&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;&amp;nbsp;r.data[i].nickname&amp;nbsp;+&amp;nbsp;&amp;quot;&amp;nbsp;&amp;amp;nbsp;(&amp;nbsp;&amp;quot;&amp;nbsp;+&amp;nbsp;status&amp;nbsp;+&amp;#39;&amp;nbsp;)&amp;nbsp;&amp;lt;\/a&amp;gt;&amp;lt;\/li&amp;gt;&amp;#39;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#friend_lists&amp;quot;).html(h);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#friend_lists&amp;quot;).on(&amp;quot;click&amp;quot;,&amp;quot;.friend&amp;quot;,function(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;to_uid&amp;nbsp;=&amp;nbsp;$(this).attr(&amp;quot;data-id&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;nickname&amp;nbsp;=&amp;nbsp;$(this).attr(&amp;quot;data-nickname&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#uname&amp;quot;).html(nickname);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;to_uid&amp;#39;]&amp;quot;).val(to_uid);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{from_uid:&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,to_uid:to_uid,typ:&amp;quot;loadHistory&amp;quot;},function(res){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;&amp;quot;&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for&amp;nbsp;(var&amp;nbsp;i&amp;nbsp;=&amp;nbsp;r.data.length&amp;nbsp;-&amp;nbsp;1;&amp;nbsp;i&amp;nbsp;&amp;gt;=&amp;nbsp;0;&amp;nbsp;i--)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data[i].from_uid&amp;nbsp;==&amp;nbsp;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;from&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].message&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h&amp;nbsp;+=&amp;nbsp;&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;to&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;r.data[i].message&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).html(h);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.dialogue&amp;quot;).show();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#sendMessage&amp;quot;).on(&amp;quot;click&amp;quot;,function(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val())&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sendMessage();\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;please&amp;nbsp;input&amp;nbsp;your&amp;nbsp;message~&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(document).keyup(function(evt){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(evt.keyCode&amp;nbsp;==&amp;nbsp;13)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if($(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val())&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox()\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sendMessage();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;please&amp;nbsp;input&amp;nbsp;your&amp;nbsp;message~&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.close&amp;quot;).on(&amp;quot;click&amp;quot;,function(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.dialogue&amp;quot;).hide();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;srcollBox(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;h&amp;nbsp;=&amp;nbsp;$(&amp;quot;.lists&amp;quot;).height();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;.scroll_box&amp;quot;).scrollTop(h,4000)\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(window.WebSocket){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;ws&amp;nbsp;=&amp;nbsp;new&amp;nbsp;WebSocket(&amp;quot;ws:\/\/192.168.0.140:9502&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onopen&amp;nbsp;=&amp;nbsp;function(evt){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;Connect&amp;nbsp;WebSocket&amp;nbsp;succuess&amp;nbsp;~~&amp;nbsp;\\\\\\\\n&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onmessage&amp;nbsp;=&amp;nbsp;function(evt){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).append(&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;to&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;evt.data&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;message&amp;nbsp;on&amp;nbsp;server&amp;nbsp;:&amp;nbsp;&amp;quot;&amp;nbsp;+&amp;nbsp;evt.data&amp;nbsp;+&amp;nbsp;&amp;quot;\\\\\\\\n&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onclose&amp;nbsp;=&amp;nbsp;function(evt){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;WebSocket&amp;nbsp;closed&amp;nbsp;~~\\\\\\\\n&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.onerror&amp;nbsp;=&amp;nbsp;function(evt){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;console.log(&amp;quot;Connect&amp;nbsp;WebSocket&amp;nbsp;failed&amp;nbsp;~~\\\\\\\\n&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;function&amp;nbsp;sendMessage(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;params&amp;nbsp;=&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;from_uid&amp;nbsp;:&amp;nbsp;&amp;lt;?php&amp;nbsp;echo&amp;nbsp;$_SESSION[&amp;#39;uid&amp;#39;];?&amp;gt;,\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;to_uid&amp;nbsp;:&amp;nbsp;$(&amp;quot;input[name=&amp;#39;to_uid&amp;#39;]&amp;quot;).val(),\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;message&amp;nbsp;:&amp;nbsp;$(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val(),\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;typ&amp;nbsp;:&amp;nbsp;&amp;quot;sendMessage&amp;quot;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;};\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;msg&amp;nbsp;=&amp;nbsp;JSON.stringify(params);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;#chat-box&amp;quot;).append(&amp;#39;&amp;lt;div&amp;nbsp;class=&amp;quot;chat-line&amp;nbsp;from&amp;quot;&amp;gt;&amp;#39;&amp;nbsp;+&amp;nbsp;$(&amp;quot;input[name=&amp;#39;content&amp;#39;]&amp;quot;).val()&amp;nbsp;+&amp;nbsp;&amp;#39;&amp;lt;\/div&amp;gt;&amp;#39;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;srcollBox();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,params,function(res){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ws.send(msg);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;send&amp;nbsp;message&amp;nbsp;failed&amp;nbsp;,&amp;nbsp;insert&amp;nbsp;mysql&amp;nbsp;failed~~\\\\\\\\n&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;Your&amp;nbsp;browser&amp;nbsp;does&amp;nbsp;not&amp;nbsp;support&amp;nbsp;WebSocket&amp;nbsp;!&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/script&amp;gt;\\r\\n&amp;lt;\/body&amp;gt;\\r\\n&amp;lt;\/html&amp;gt;&lt;\/pre&gt;&lt;p&gt;\u4e94\u3001\u767b\u5f55\u9875\u9762\u3002login.html&lt;br\/&gt;&lt;\/p&gt;&lt;pre class=&quot;brush:html;toolbar:false&quot;&gt;&amp;lt;!DOCTYPE&amp;nbsp;html&amp;gt;\\r\\n&amp;lt;html&amp;gt;\\r\\n&amp;lt;head&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;charset=&amp;quot;UTF-8&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;http-equiv=&amp;quot;X-UA-Compatible&amp;quot;&amp;nbsp;content=&amp;quot;IE=edge&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-capable&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-touch-fullscreen&amp;quot;&amp;nbsp;content=&amp;quot;yes&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;apple-mobile-web-app-status-bar-style&amp;quot;&amp;nbsp;content=&amp;quot;black&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;format-detection&amp;quot;&amp;nbsp;content=&amp;quot;telephone=no&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;msapplication-tap-highlight&amp;quot;&amp;nbsp;content=&amp;quot;no&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;meta&amp;nbsp;name=&amp;quot;viewport&amp;quot;&amp;nbsp;content=&amp;quot;initial-scale=1,maximum-scale=1,minimum-scale=1&amp;quot;&amp;nbsp;\/&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;webqq----swoole&amp;lt;\/title&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;nbsp;src=&amp;quot;.\/js\/jquery.js&amp;quot;&amp;gt;&amp;lt;\/script&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;style&amp;nbsp;type=&amp;quot;text\/css&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;html,body{margin:0;padding:&amp;nbsp;0;background-color:&amp;nbsp;#eee}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.login-form{background-color:&amp;nbsp;#fff;width:&amp;nbsp;500px;height:&amp;nbsp;500px;margin:100px&amp;nbsp;auto;border:1px&amp;nbsp;#ccc&amp;nbsp;solid;border-radius:&amp;nbsp;5px;box-shadow:&amp;nbsp;3px&amp;nbsp;3px&amp;nbsp;3px&amp;nbsp;#666}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;h3{text-align:&amp;nbsp;center;margin-top:&amp;nbsp;100px}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container{text-align:&amp;nbsp;center;margin-top:&amp;nbsp;30px;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container&amp;nbsp;label{display:&amp;nbsp;inline-block;width:&amp;nbsp;50px;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.container&amp;nbsp;input{display:&amp;nbsp;inline-block;height:&amp;nbsp;25px;line-height:&amp;nbsp;25px;padding:&amp;nbsp;0px&amp;nbsp;5px;width:&amp;nbsp;300px;outline:&amp;nbsp;none}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;input[name=&amp;#39;login&amp;#39;]{background-color:&amp;nbsp;#5aba1f;color:#fff;border:none;width:&amp;nbsp;150px;height:&amp;nbsp;30px;line-height:&amp;nbsp;30px;border-radius:&amp;nbsp;5px;margin-top:&amp;nbsp;30px;cursor:&amp;nbsp;pointer;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.warning{border:2px&amp;nbsp;#f00&amp;nbsp;solid;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/style&amp;gt;\\r\\n&amp;lt;\/head&amp;gt;\\r\\n&amp;lt;body&amp;gt;\\r\\n\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;form&amp;nbsp;method=&amp;quot;post&amp;quot;&amp;nbsp;action=&amp;quot;&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;h3&amp;gt;WebQQ&amp;lt;\/h3&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;&amp;lt;label&amp;gt;\u6635\u79f0:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;nickname&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u6635\u79f0&amp;quot;&amp;nbsp;&amp;gt;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;&amp;lt;label&amp;gt;\u5e10\u53f7:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;text&amp;quot;&amp;nbsp;name=&amp;quot;username&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u7528\u6237&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;&amp;lt;label&amp;gt;\u5bc6\u7801:&amp;lt;\/label&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;password&amp;quot;&amp;nbsp;name=&amp;quot;password&amp;quot;&amp;nbsp;placeholder=&amp;quot;\u5bc6\u7801&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;div&amp;gt;&amp;lt;input&amp;nbsp;type=&amp;quot;button&amp;quot;&amp;nbsp;name=&amp;quot;login&amp;quot;&amp;nbsp;value=&amp;quot;\u767b\u5f55&amp;quot;&amp;gt;&amp;lt;\/div&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/form&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;script&amp;nbsp;type=&amp;quot;text\/javascript&amp;quot;&amp;gt;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(function(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;login&amp;#39;]&amp;quot;).click(function(){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;nickname&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).val();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;username&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).val();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;password&amp;nbsp;=&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).val();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(nickname&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8bbe\u7f6e\u6635\u79f0&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).focus();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(username&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8f93\u5165\u5e10\u53f7&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).focus();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(password&amp;nbsp;==&amp;nbsp;&amp;quot;&amp;quot;)&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;\u8bf7\u8f93\u5165\u5bc6\u7801&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).focus();\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).addClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;nickname&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;username&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$(&amp;quot;input[name=&amp;#39;password&amp;#39;]&amp;quot;).removeClass(&amp;quot;warning&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;$.post(&amp;quot;.\/swoole\/action.php&amp;quot;,{nickname:nickname,username:username,password:password,typ:&amp;#39;login&amp;#39;},function(res){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;r&amp;nbsp;=&amp;nbsp;eval(&amp;quot;(&amp;quot;&amp;nbsp;+&amp;nbsp;res&amp;nbsp;+&amp;nbsp;&amp;quot;)&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(r.data&amp;nbsp;==&amp;nbsp;&amp;quot;1&amp;quot;){\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;window.location.href=&amp;quot;index.php&amp;quot;;\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;alert(&amp;quot;failed~~&amp;quot;);\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});\\r\\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;\/script&amp;gt;\\r\\n&amp;lt;\/body&amp;gt;\\r\\n&amp;lt;\/html&amp;gt;&lt;\/pre&gt;&lt;p&gt;\u516d\u3001\u6570\u636e\u5e93\u6587\u4ef6\u3002webqq.sql&lt;\/p&gt;&lt;pre class=&quot;brush:sql;toolbar:false&quot;&gt;--&amp;nbsp;Adminer&amp;nbsp;4.1.0&amp;nbsp;MySQL&amp;nbsp;dump\\r\\n\\r\\nSET&amp;nbsp;NAMES&amp;nbsp;utf8;\\r\\nSET&amp;nbsp;time_zone&amp;nbsp;=&amp;nbsp;&amp;#39;+00:00&amp;#39;;\\r\\nSET&amp;nbsp;foreign_key_checks&amp;nbsp;=&amp;nbsp;0;\\r\\nSET&amp;nbsp;sql_mode&amp;nbsp;=&amp;nbsp;&amp;#39;NO_AUTO_VALUE_ON_ZERO&amp;#39;;\\r\\n\\r\\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`chat`;\\r\\nCREATE&amp;nbsp;TABLE&amp;nbsp;`chat`&amp;nbsp;(\\r\\n&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;ID&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;`from_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,\\r\\n&amp;nbsp;&amp;nbsp;`to_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,\\r\\n&amp;nbsp;&amp;nbsp;`message`&amp;nbsp;varchar(255)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL,\\r\\n&amp;nbsp;&amp;nbsp;`send_time`&amp;nbsp;timestamp&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;DEFAULT&amp;nbsp;&amp;#39;0000-00-00&amp;nbsp;00:00:00&amp;#39;&amp;nbsp;ON&amp;nbsp;UPDATE&amp;nbsp;CURRENT_TIMESTAMP,\\r\\n&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)\\r\\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci;\\r\\n\\r\\n\\r\\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`fd_tmp`;\\r\\nCREATE&amp;nbsp;TABLE&amp;nbsp;`fd_tmp`&amp;nbsp;(\\r\\n&amp;nbsp;&amp;nbsp;`fd`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,\\r\\n&amp;nbsp;&amp;nbsp;`uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL\\r\\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;FD\u503c\u4e0e\u7528\u6237ID\u7ed1\u5b9a&amp;#39;;\\r\\n\\r\\n\\r\\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`friend`;\\r\\nCREATE&amp;nbsp;TABLE&amp;nbsp;`friend`&amp;nbsp;(\\r\\n&amp;nbsp;&amp;nbsp;`from_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;DEFAULT&amp;nbsp;NULL,\\r\\n&amp;nbsp;&amp;nbsp;`to_uid`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL,\\r\\n&amp;nbsp;&amp;nbsp;`nickname`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL\\r\\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;\u597d\u53cb\u5217\u8868&amp;#39;;\\r\\n\\r\\n\\r\\nDROP&amp;nbsp;TABLE&amp;nbsp;IF&amp;nbsp;EXISTS&amp;nbsp;`users`;\\r\\nCREATE&amp;nbsp;TABLE&amp;nbsp;`users`&amp;nbsp;(\\r\\n&amp;nbsp;&amp;nbsp;`id`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;AUTO_INCREMENT&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;ID&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;`nickname`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u6635\u79f0&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;`username`&amp;nbsp;varchar(45)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u540d\u79f0&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;`password`&amp;nbsp;char(32)&amp;nbsp;COLLATE&amp;nbsp;utf8_unicode_ci&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u5bc6\u7801&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;`login_time`&amp;nbsp;datetime&amp;nbsp;NOT&amp;nbsp;NULL&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u6700\u540e\u767b\u9646\u65f6\u95f4&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;`login_num`&amp;nbsp;int(10)&amp;nbsp;unsigned&amp;nbsp;DEFAULT&amp;nbsp;&amp;#39;0&amp;#39;&amp;nbsp;COMMENT&amp;nbsp;&amp;#39;\u767b\u9646\u6b21\u6570&amp;#39;,\\r\\n&amp;nbsp;&amp;nbsp;PRIMARY&amp;nbsp;KEY&amp;nbsp;(`id`)\\r\\n)&amp;nbsp;ENGINE=MyISAM&amp;nbsp;DEFAULT&amp;nbsp;CHARSET=utf8&amp;nbsp;COLLATE=utf8_unicode_ci&amp;nbsp;COMMENT=&amp;#39;\u7528\u6237\u5217\u8868&amp;#39;;\\r\\n\\r\\n\\r\\n--&amp;nbsp;2018-03-27&amp;nbsp;10:05:35&lt;\/pre&gt;&lt;p&gt;\u4e03\u3001\u6ce8\u610f\u4e8b\u9879&lt;\/p&gt;&lt;p&gt;\u670d\u52a1\u5668\u73af\u5883\uff1acentos + mariadb + php7 + swoole + apache&lt;\/p&gt;&lt;p&gt;\u5fc5\u987b\u5b89\u88c5\uff1aswoole\u6269\u5c55\u3001linux\u7cfb\u7edf\u3001php7\u4ee5\u4e0a\u7248\u672c&lt;br\/&gt;&lt;\/p&gt;&lt;p&gt;\u4f7f\u7528CLI\u6a21\u5f0f\u6267\u884cwebsocket.php\u6587\u4ef6&lt;\/p&gt;&lt;p&gt;\u6e90\u6587\u4ef6\u4e0b\u8f7d\u5730\u5740\uff1ahttps:\/\/pan.baidu.com\/s\/1sWY-2zTj8slm9O7HCR-49w&lt;\/p&gt;', `update_time` = '2018-04-19 15:59:20' WHERE `id` = 7"]
[2018-04-19 15:59:27] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:59:27] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 12 OFFSET 0"]
[2018-04-19 15:59:36] ["SELECT * FROM `frame_author_info` WHERE `admin_id` = '1' LIMIT 1"]
[2018-04-19 15:59:36] ["SELECT `id`,`name` FROM `frame_categorys` ORDER BY `sort` DESC,`id` ASC"]
[2018-04-19 15:59:36] ["SELECT `frame_articles`.`id`,`frame_articles`.`title`,`frame_articles`.`click`,`frame_articles`.`content`,`frame_articles`.`create_time`,`frame_categorys`.`name` FROM `frame_articles` LEFT JOIN `frame_categorys` ON `frame_articles`.`pid` = `frame_categorys`.`id` ORDER BY `id` ASC LIMIT 1 OFFSET 0"]
